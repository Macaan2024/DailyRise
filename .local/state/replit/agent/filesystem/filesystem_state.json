{"file_contents":{"src/pages/Goals.js":{"content":"import React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\n\nconst Goals = () => {\n  const { user } = useAuth();\n  const [goals, setGoals] = useState([]);\n  const [habits, setHabits] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [formData, setFormData] = useState({ title: '', target_date: '', habit_id: '' });\n  const [editingGoal, setEditingGoal] = useState(null);\n\n  const goalTitleExamples = [\n    'Run 5km without stopping',\n    'Read 50 pages',\n    'Meditate for 30 minutes',\n    'Drink 8 glasses of water',\n    'Complete full workout',\n    'Learn a new skill',\n    'Practice gratitude',\n    'Walk 10,000 steps',\n    'Sleep 8 hours',\n    'No sugar for a week',\n    'Finish project',\n    'Journal for 15 minutes'\n  ];\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n  }, [user]);\n\n  const fetchData = async () => {\n    try {\n      const { data: habitsData } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id);\n\n      const { data: goalsData } = await supabase\n        .from('goals')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('target_date', { ascending: true });\n\n      setHabits(habitsData || []);\n      setGoals(goalsData || []);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addGoal = async () => {\n    if (!formData.title || !formData.target_date || !formData.habit_id) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Please fill in all fields',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const selectedDate = new Date(formData.target_date);\n    \n    if (selectedDate < today) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Invalid Date',\n        text: 'Target date must be today or in the future',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    try {\n      if (editingGoal) {\n        // Update existing goal\n        const { error } = await supabase\n          .from('goals')\n          .update({\n            title: formData.title,\n            target_date: formData.target_date,\n            habit_id: parseInt(formData.habit_id),\n          })\n          .eq('id', editingGoal.id);\n\n        if (error) throw error;\n\n        setGoals(goals.map(g => g.id === editingGoal.id ? {\n          ...g,\n          title: formData.title,\n          target_date: formData.target_date,\n          habit_id: parseInt(formData.habit_id),\n        } : g));\n\n        Swal.fire({\n          icon: 'success',\n          title: 'Updated',\n          text: 'Goal updated successfully!',\n          confirmButtonColor: '#043915',\n        });\n      } else {\n        // Create new goal\n        const { data, error } = await supabase\n          .from('goals')\n          .insert([{\n            title: formData.title,\n            target_date: formData.target_date,\n            habit_id: parseInt(formData.habit_id),\n            user_id: user.id,\n            is_achieve: false,\n          }])\n          .select();\n\n        if (error) throw error;\n\n        setGoals([...goals, data[0]]);\n\n        Swal.fire({\n          icon: 'success',\n          title: 'Success',\n          text: 'Goal created successfully!',\n          confirmButtonColor: '#043915',\n        });\n      }\n\n      setFormData({ title: '', target_date: '', habit_id: '' });\n      setEditingGoal(null);\n      setShowAddModal(false);\n    } catch (error) {\n      console.error('Add/update goal error:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: error.message || 'Failed to save goal',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const startEditGoal = (goal) => {\n    setEditingGoal(goal);\n    setFormData({\n      title: goal.title,\n      target_date: goal.target_date,\n      habit_id: goal.habit_id,\n    });\n    setShowAddModal(true);\n  };\n\n  const toggleGoal = async (goalId, currentStatus) => {\n    try {\n      const { error } = await supabase\n        .from('goals')\n        .update({ is_achieve: !currentStatus })\n        .eq('id', goalId);\n\n      if (error) throw error;\n\n      setGoals(goals.map(g => g.id === goalId ? { ...g, is_achieve: !currentStatus } : g));\n      \n      Swal.fire({\n        icon: 'success',\n        title: 'Updated',\n        text: !currentStatus ? 'Goal marked as achieved!' : 'Goal marked as pending',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n    } catch (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to update goal',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const deleteGoal = async (goalId) => {\n    const result = await Swal.fire({\n      icon: 'warning',\n      title: 'Delete Goal?',\n      text: 'This action cannot be undone',\n      showCancelButton: true,\n      confirmButtonColor: '#dc2626',\n      cancelButtonColor: '#6b7280',\n      confirmButtonText: 'Delete',\n    });\n\n    if (!result.isConfirmed) return;\n\n    try {\n      const { error } = await supabase\n        .from('goals')\n        .delete()\n        .eq('id', goalId);\n\n      if (error) throw error;\n\n      setGoals(goals.filter(g => g.id !== goalId));\n      Swal.fire({\n        icon: 'success',\n        title: 'Deleted',\n        text: 'Goal deleted successfully',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n    } catch (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to delete goal',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const getHabitName = (habitId) => {\n    return habits.find(h => h.id === habitId)?.name || 'Unknown Habit';\n  };\n\n  const formatDate = (dateStr) => {\n    return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Goals\" />\n      \n      <div className=\"px-4 py-4 pb-32\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-subheading font-poppins text-dark\">My Goals</h2>\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"flex items-center gap-1 text-body text-primary\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n            </svg>\n            Add Goal\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : goals.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n            </div>\n            <p className=\"text-body text-gray-500 mb-4\">No goals yet. Set one to stay motivated!</p>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"btn-primary\"\n            >\n              Set Your First Goal\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {goals.map((goal) => (\n              <div key={goal.id} className={`card ${goal.is_achieve ? 'bg-green-50 border border-green-200' : ''}`}>\n                <div className=\"flex items-start gap-3\">\n                  <button\n                    onClick={() => toggleGoal(goal.id, goal.is_achieve)}\n                    className=\"mt-1 flex-shrink-0\"\n                  >\n                    <div className={`w-6 h-6 rounded border-2 flex items-center justify-center ${\n                      goal.is_achieve ? 'bg-primary border-primary' : 'border-gray-300'\n                    }`}>\n                      {goal.is_achieve && (\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                        </svg>\n                      )}\n                    </div>\n                  </button>\n                  <div className=\"flex-1\">\n                    <h3 className={`text-subheading font-poppins ${goal.is_achieve ? 'line-through text-gray-500' : 'text-dark'}`}>\n                      {goal.title}\n                    </h3>\n                    <p className=\"text-body text-gray-500 mt-1\">{getHabitName(goal.habit_id)}</p>\n                    <p className=\"text-xs text-gray-400 mt-1\">Target: {formatDate(goal.target_date)}</p>\n                  </div>\n                  <div className=\"flex gap-1\">\n                    <button\n                      onClick={() => startEditGoal(goal)}\n                      className=\"p-2 text-gray-400 hover:text-primary\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                      </svg>\n                    </button>\n                    <button\n                      onClick={() => deleteGoal(goal.id)}\n                      className=\"p-2 text-gray-400 hover:text-red-500\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-end overflow-hidden\">\n          <div className=\"bg-white w-full max-h-[85vh] rounded-t-3xl overflow-hidden flex flex-col animate-slide-up\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100 flex-shrink-0\">\n              <h2 className=\"text-heading font-poppins text-dark\">{editingGoal ? 'Edit Goal' : 'Add Goal'}</h2>\n              <button \n                onClick={() => {\n                  setShowAddModal(false);\n                  setEditingGoal(null);\n                  setFormData({ title: '', target_date: '', habit_id: '' });\n                }}\n                className=\"p-1 text-gray-400 hover:text-gray-600\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto px-6 py-4\">\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-body text-gray-600 mb-3 font-medium\">Goal Title</label>\n                  <select\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    className=\"input-field w-full\"\n                  >\n                    <option value=\"\">Select a goal type...</option>\n                    {goalTitleExamples.map((title) => (\n                      <option key={title} value={title}>{title}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-body text-gray-600 mb-3 font-medium\">Select Habit</label>\n                  <select\n                    value={formData.habit_id}\n                    onChange={(e) => setFormData({ ...formData, habit_id: e.target.value })}\n                    className=\"input-field w-full\"\n                  >\n                    <option value=\"\">Choose a habit...</option>\n                    {habits.map((habit) => (\n                      <option key={habit.id} value={habit.id}>{habit.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-body text-gray-600 mb-3 font-medium\">Target Date</label>\n                  <input\n                    type=\"date\"\n                    value={formData.target_date}\n                    onChange={(e) => setFormData({ ...formData, target_date: e.target.value })}\n                    className=\"input-field w-full\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex-shrink-0 bg-white border-t border-gray-100 px-6 py-4 space-y-3 pb-24\">\n              <button\n                onClick={addGoal}\n                className=\"btn-primary w-full py-3 rounded-lg font-medium text-white\"\n              >\n                Create Goal\n              </button>\n              <button\n                onClick={() => setShowAddModal(false)}\n                className=\"w-full py-3 rounded-lg bg-gray-100 text-gray-600 text-body font-medium\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </Layout>\n  );\n};\n\nexport default Goals;\n","path":null,"size_bytes":14430,"size_tokens":null},"src/pages/Community.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\nimport Leaderboard from '../components/Leaderboard';\nimport ChallengeModal from '../components/ChallengeModal';\nimport ChallengeReceivedModal from '../components/ChallengeReceivedModal';\nimport ViewChallengeModal from '../components/ViewChallengeModal';\nimport Swal from 'sweetalert2';\n\nconst Community = () => {\n  const { user } = useAuth();\n  const [communities] = useState([\n    { id: 1, name: 'Fitness Warriors', description: 'Exercise and fitness challenges' },\n    { id: 2, name: 'Meditation Masters', description: 'Mindfulness and meditation group' },\n    { id: 3, name: 'Reading Circle', description: 'Daily reading habits' },\n    { id: 4, name: 'Productivity Pros', description: 'Build productive habits together' },\n    { id: 5, name: 'Health Champions', description: 'Health and wellness community' },\n  ]);\n  const [joinedCommunities, setJoinedCommunities] = useState([]);\n  const [selectedCommunity, setSelectedCommunity] = useState(null);\n  const [showChallengeModal, setShowChallengeModal] = useState(false);\n  const [challengedUserId, setChallengedUserId] = useState(null);\n  const [pendingChallenges, setPendingChallenges] = useState([]);\n  const [showChallengeReceivedModal, setShowChallengeReceivedModal] = useState(false);\n  const [selectedChallengeId, setSelectedChallengeId] = useState(null);\n  const [showViewChallengeModal, setShowViewChallengeModal] = useState(false);\n  const [viewChallengeId, setViewChallengeId] = useState(null);\n\n  useEffect(() => {\n    if (user) {\n      fetchJoinedCommunities();\n      fetchPendingChallenges();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n\n  useEffect(() => {\n    // Auto-show first pending challenge modal if any exist\n    if (pendingChallenges.length > 0 && !selectedChallengeId && !showChallengeReceivedModal) {\n      setSelectedChallengeId(pendingChallenges[0].id);\n      setShowChallengeReceivedModal(true);\n    }\n  }, [pendingChallenges, selectedChallengeId, showChallengeReceivedModal]);\n\n  const fetchJoinedCommunities = async () => {\n    try {\n      const { data } = await supabase\n        .from('community_members')\n        .select('community_id')\n        .eq('user_id', user.id);\n      setJoinedCommunities(data?.map(m => m.community_id) || []);\n    } catch (error) {\n      console.error('Error fetching joined communities:', error);\n    }\n  };\n\n  const fetchPendingChallenges = async () => {\n    try {\n      const { data } = await supabase\n        .from('challenges')\n        .select('*')\n        .eq('challenged_user_id', user.id)\n        .eq('status', 'pending')\n        .order('created_at', { ascending: false });\n      \n      setPendingChallenges(data || []);\n    } catch (error) {\n      console.error('Error fetching pending challenges:', error);\n    }\n  };\n\n  const joinCommunity = async (communityId) => {\n    try {\n      const { error } = await supabase\n        .from('community_members')\n        .insert([{\n          community_id: communityId,\n          user_id: user.id,\n          role: 'member'\n        }]);\n\n      if (error) {\n        console.error('Supabase error details:', error);\n        throw error;\n      }\n\n      setJoinedCommunities([...joinedCommunities, communityId]);\n\n      Swal.fire({\n        icon: 'success',\n        title: 'Joined!',\n        text: 'You successfully joined the community',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n    } catch (error) {\n      console.error('Join error:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to join community',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const leaveCommunity = async (communityId) => {\n    try {\n      const { error } = await supabase\n        .from('community_members')\n        .delete()\n        .eq('community_id', communityId)\n        .eq('user_id', user.id);\n\n      if (error) throw error;\n\n      setJoinedCommunities(joinedCommunities.filter(id => id !== communityId));\n\n      Swal.fire({\n        icon: 'success',\n        title: 'Left!',\n        text: 'You left the community',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n    } catch (error) {\n      console.error('Leave error:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to leave community',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const handleChallenge = (userId) => {\n    setChallengedUserId(userId);\n    setShowChallengeModal(true);\n  };\n\n  const handleViewChallenge = async (userId) => {\n    try {\n      console.log('üîç handleViewChallenge called with userId:', userId, 'current user:', user.id);\n      \n      // Try to find challenge where user is challenger\n      let { data } = await supabase\n        .from('challenges')\n        .select('*')\n        .eq('challenger_id', user.id)\n        .eq('challenged_user_id', userId)\n        .neq('status', 'declined')\n        .maybeSingle();\n\n      console.log('üìã Challenge as challenger:', data);\n\n      // If not found, try where user is challenged_user\n      if (!data) {\n        const result = await supabase\n          .from('challenges')\n          .select('*')\n          .eq('challenger_id', userId)\n          .eq('challenged_user_id', user.id)\n          .neq('status', 'declined')\n          .maybeSingle();\n        data = result.data;\n        console.log('üìã Challenge as challenged_user:', data);\n      }\n\n      if (data) {\n        console.log('‚úÖ Challenge found! ID:', data.id, 'Status:', data.status);\n        setViewChallengeId(data.id);\n        setShowViewChallengeModal(true);\n      } else {\n        console.log('‚ùå No challenge found');\n        Swal.fire({\n          icon: 'warning',\n          title: 'Not Found',\n          text: 'Challenge not found',\n          confirmButtonColor: '#043915',\n        });\n      }\n    } catch (error) {\n      console.error('Error finding challenge:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to view challenge',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const handleChallengeRespond = () => {\n    // Refresh pending challenges after responding\n    setSelectedChallengeId(null);\n    fetchPendingChallenges();\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Community Accountability\" />\n      \n      <div className=\"px-4 py-4 pb-32\">\n        {/* Show challenge notification badge with refresh button */}\n        {pendingChallenges.length > 0 && (\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4 flex items-center justify-between\">\n            <p className=\"text-small text-yellow-900\">\n              üéØ You have <span className=\"font-bold\">{pendingChallenges.length}</span> pending challenge{pendingChallenges.length > 1 ? 's' : ''}!\n            </p>\n            <button\n              onClick={fetchPendingChallenges}\n              className=\"text-xs bg-yellow-200 hover:bg-yellow-300 text-yellow-900 px-2 py-1 rounded font-medium transition\"\n            >\n              üîÑ Refresh\n            </button>\n          </div>\n        )}\n        \n        {/* Refresh button always visible */}\n        <button\n          onClick={fetchPendingChallenges}\n          className=\"text-xs mb-3 px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded font-medium transition flex items-center gap-1\"\n        >\n          üîÑ Check for Challenges\n        </button>\n\n        {selectedCommunity ? (\n          // Show leaderboard for selected community\n          <div>\n            <button\n              onClick={() => setSelectedCommunity(null)}\n              className=\"text-primary text-small font-medium mb-4 flex items-center\"\n            >\n              ‚Üê Back to Communities\n            </button>\n            <Leaderboard \n              communityId={selectedCommunity} \n              onChallenge={handleChallenge}\n              onViewChallenge={handleViewChallenge}\n            />\n          </div>\n        ) : (\n          // Show communities list\n          <div className=\"space-y-3\">\n            {communities.map((community) => {\n              const isJoined = joinedCommunities.includes(community.id);\n              return (\n                <div \n                  key={community.id} \n                  className={`card ${isJoined ? 'cursor-pointer hover:shadow-md transition' : ''}`}\n                  onClick={() => isJoined && setSelectedCommunity(community.id)}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-body font-medium text-dark\">{community.name}</h3>\n                      <p className=\"text-small text-gray-500\">{community.description}</p>\n                      {isJoined && <p className=\"text-small text-primary mt-1\">üëâ Tap to view leaderboard</p>}\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        isJoined ? leaveCommunity(community.id) : joinCommunity(community.id);\n                      }}\n                      className={`px-4 py-2 text-xs rounded font-medium whitespace-nowrap ml-3 ${\n                        isJoined\n                          ? 'bg-red-500 text-white hover:bg-red-600'\n                          : 'bg-primary text-white hover:bg-primary/90'\n                      }`}\n                    >\n                      {isJoined ? 'Leave' : '+ Join'}\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      <ChallengeModal\n        isOpen={showChallengeModal}\n        communityId={selectedCommunity}\n        challengedUserId={challengedUserId}\n        onClose={() => setShowChallengeModal(false)}\n        onSuccess={() => {}}\n      />\n\n      <ChallengeReceivedModal\n        isOpen={showChallengeReceivedModal}\n        challengeId={selectedChallengeId}\n        onClose={() => {\n          setShowChallengeReceivedModal(false);\n          setSelectedChallengeId(null);\n        }}\n        onRespond={handleChallengeRespond}\n      />\n\n      <ViewChallengeModal\n        isOpen={showViewChallengeModal}\n        challengeId={viewChallengeId}\n        onClose={() => setShowViewChallengeModal(false)}\n      />\n    </Layout>\n  );\n};\n\nexport default Community;\n","path":null,"size_bytes":10632,"size_tokens":null},"src/components/ChallengeModal.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Swal from 'sweetalert2';\n\nconst ChallengeModal = ({ isOpen, communityId, challengedUserId, onClose, onSuccess }) => {\n  const { user } = useAuth();\n  const [habits, setHabits] = useState([]);\n  const [selectedHabit, setSelectedHabit] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchUserHabits();\n    }\n  }, [isOpen, user]);\n\n  const fetchUserHabits = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setHabits(data || []);\n      if (data?.length > 0) {\n        setSelectedHabit(data[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching habits:', error);\n    }\n  };\n\n  const sendChallenge = async () => {\n    if (!selectedHabit) {\n      Swal.fire({\n        icon: 'warning',\n        title: 'Select a Habit',\n        text: 'Please select a habit to challenge',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const { error } = await supabase\n        .from('challenges')\n        .insert([{\n          challenger_id: user.id,\n          challenged_user_id: challengedUserId,\n          habit_id: selectedHabit,\n          community_id: communityId,\n          status: 'pending'\n        }]);\n\n      if (error) throw error;\n\n      Swal.fire({\n        icon: 'success',\n        title: 'Challenge Sent!',\n        text: 'Your challenge has been sent',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n\n      onSuccess?.();\n      onClose();\n    } catch (error) {\n      console.error('Error sending challenge:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to send challenge',\n        confirmButtonColor: '#043915',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-end z-50\">\n      <div className=\"bg-white w-full rounded-t-2xl p-6 pb-32 max-w-md mx-auto max-h-[80vh] overflow-y-auto\">\n        <h3 className=\"text-lg font-semibold text-dark mb-4\">üéØ Send Challenge</h3>\n\n        <div className=\"mb-4\">\n          <label className=\"block text-small font-medium text-dark mb-2\">\n            Select Habit to Challenge\n          </label>\n          <select\n            value={selectedHabit || ''}\n            onChange={(e) => setSelectedHabit(Number(e.target.value))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded text-small focus:outline-none focus:border-primary\"\n          >\n            <option value=\"\">Choose a habit...</option>\n            {habits.map((habit) => (\n              <option key={habit.id} value={habit.id}>\n                {habit.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <p className=\"text-small text-gray-600 mb-6\">\n          Challenge this user to complete this habit. If they succeed, they'll earn 25 points!\n        </p>\n\n        <div className=\"flex gap-3 sticky bottom-0 bg-white pt-4\">\n          <button\n            onClick={onClose}\n            className=\"flex-1 px-4 py-2 bg-gray-200 text-dark rounded font-medium text-small hover:bg-gray-300\"\n            disabled={loading}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={sendChallenge}\n            disabled={loading}\n            className=\"flex-1 px-4 py-2 bg-primary text-white rounded font-medium text-small hover:bg-primary/90 disabled:opacity-50\"\n          >\n            {loading ? 'Sending...' : 'Send Challenge'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChallengeModal;\n","path":null,"size_bytes":3989,"size_tokens":null},"src/components/Layout.js":{"content":"import React from 'react';\nimport BottomNav from './BottomNav';\n\nconst Layout = ({ children }) => {\n  return (\n    <div className=\"min-h-screen bg-gray-50 max-w-md mx-auto relative\">\n      <main className=\"pb-20\">\n        {children}\n      </main>\n      <BottomNav />\n    </div>\n  );\n};\n\nexport default Layout;\n","path":null,"size_bytes":310,"size_tokens":null},"replit.md":{"content":"# Daily Rise - Habit Tracking Application\n\n## Overview\nDaily Rise is a mobile-first React application designed to help users build and maintain daily habits. It offers a comprehensive suite of features including progress tracking, calendar views, weekly summaries, customizable reminders with audio alarms, user profile management, gamified badges, community groups for accountability, and goal setting. The project's vision is to make habit-building an engaging, social, and motivational journey, empowering users to \"Level up their life, every single day.\"\n\n## User Preferences\nI prefer iterative development with clear, concise communication. Please provide detailed explanations for complex solutions and ask for confirmation before implementing major architectural changes. I value clean, readable code and well-documented functions. I prefer modern JavaScript features and functional components in React.\n\n## System Architecture\nDaily Rise is built with React 19.2.0, utilizing Tailwind CSS 3.4.18 for styling and React Router DOM for navigation. The application follows a component-based architecture, with reusable UI components, dedicated contexts for state management (e.g., AuthContext), and custom hooks for shared logic.\n\n**UI/UX Decisions:**\n- **Mobile-first design:** Ensures optimal experience on smaller screens.\n- **Color Scheme:** Primary (#043915 - Dark Green), Dark (#000000 - Black), Light (#ffffff - White).\n- **Typography:** Poppins for headings, Roboto for body text.\n- **Navigation:** A consistent bottom navigation bar with 5 key items: Home, Progress, Logs, Alerts, and Rewards.\n- **Notifications:** SweetAlert2 is used for user notifications and validations.\n\n**Technical Implementations:**\n- **Authentication:** Custom user authentication handled via Supabase, including login, registration, and password recovery.\n- **Gamification:** Automated badge awarding system based on habit completion milestones, and a points system for completing reminders and challenges.\n- **Reminders:** Web Audio API for customizable alarm sounds with a 60-second countdown modal.\n- **Community & Challenges:** Real-time challenge system with dynamic UI updates and dual-user point rewards, leveraging Supabase Realtime channels.\n- **Image Handling:** Profile image uploads with preview functionality.\n- **Database Schema:** Structured to support users, habits, logs, goals, badges, community groups, challenges, and user points.\n- **RLS Policies:** Simplified Row-Level Security for custom authentication integration.\n\n**Feature Specifications:**\n- **Home Dashboard:** Displays daily progress, badges earned, points, and communities joined, along with clickable highlights for Gamified Progress, Goal Setting, Smart Insights, and Community Accountability.\n- **Progress Tracking:** Calendar view, weekly summaries with visual progress bars, streak counters, and success rates.\n- **Goals:** CRUD operations for goal creation, linking to habits, and progress tracking.\n- **Badges:** Auto-awarded badges based on habit consistency, displayed with progress counters.\n- **Community:** Create/join communities, a real-time leaderboard, and a challenge system where users can challenge others with habits, earning points collaboratively.\n- **Rewards:** Point-based system for earning badges and claiming physical reward items.\n- **Profile:** Account settings, password change, and image upload.\n\n## External Dependencies\n- **Supabase:** Backend as a Service (BaaS) for database, authentication, and real-time functionalities.\n- **React Router DOM:** For client-side routing.\n- **SweetAlert2:** For custom, attractive alert and notification modals.\n- **Web Audio API:** Used for generating and managing custom alarm sounds.","path":null,"size_bytes":3725,"size_tokens":null},"README.md":{"content":"# Getting Started with Create React App\n\nThis project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).\n\n## Available Scripts\n\nIn the project directory, you can run:\n\n### `npm start`\n\nRuns the app in the development mode.\\\nOpen [http://localhost:3000](http://localhost:3000) to view it in your browser.\n\nThe page will reload when you make changes.\\\nYou may also see any lint errors in the console.\n\n### `npm test`\n\nLaunches the test runner in the interactive watch mode.\\\nSee the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.\n\n### `npm run build`\n\nBuilds the app for production to the `build` folder.\\\nIt correctly bundles React in production mode and optimizes the build for the best performance.\n\nThe build is minified and the filenames include the hashes.\\\nYour app is ready to be deployed!\n\nSee the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.\n\n### `npm run eject`\n\n**Note: this is a one-way operation. Once you `eject`, you can't go back!**\n\nIf you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.\n\nInstead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.\n\nYou don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.\n\n## Learn More\n\nYou can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).\n\nTo learn React, check out the [React documentation](https://reactjs.org/).\n\n### Code Splitting\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)\n\n### Analyzing the Bundle Size\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)\n\n### Making a Progressive Web App\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)\n\n### Advanced Configuration\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)\n\n### Deployment\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)\n\n### `npm run build` fails to minify\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)\n","path":null,"size_bytes":3359,"size_tokens":null},"src/App.js":{"content":"import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\n\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport ForgotPassword from './pages/ForgotPassword';\nimport Home from './pages/Home';\nimport Progress from './pages/Progress';\nimport Logs from './pages/Logs';\nimport Notifications from './pages/Notifications';\nimport Goals from './pages/Goals';\nimport Badges from './pages/Badges';\nimport Community from './pages/Community';\nimport Rewards from './pages/Rewards';\nimport Profile from './pages/Profile';\n\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n  \n  return children;\n};\n\nconst PublicRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n  \n  if (user) {\n    return <Navigate to=\"/home\" replace />;\n  }\n  \n  return children;\n};\n\nfunction App() {\n  return (\n    <Router>\n      <AuthProvider>\n        <div className=\"min-h-screen bg-gray-50\">\n          <Routes>\n            <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\n            \n            <Route path=\"/login\" element={\n              <PublicRoute>\n                <Login />\n              </PublicRoute>\n            } />\n            \n            <Route path=\"/register\" element={\n              <PublicRoute>\n                <Register />\n              </PublicRoute>\n            } />\n            \n            <Route path=\"/forgot-password\" element={\n              <PublicRoute>\n                <ForgotPassword />\n              </PublicRoute>\n            } />\n            \n            <Route path=\"/home\" element={\n              <ProtectedRoute>\n                <Home />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/progress\" element={\n              <ProtectedRoute>\n                <Progress />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/logs\" element={\n              <ProtectedRoute>\n                <Logs />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/notifications\" element={\n              <ProtectedRoute>\n                <Notifications />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/goals\" element={\n              <ProtectedRoute>\n                <Goals />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/badges\" element={\n              <ProtectedRoute>\n                <Badges />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/community\" element={\n              <ProtectedRoute>\n                <Community />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/rewards\" element={\n              <ProtectedRoute>\n                <Rewards />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"/profile\" element={\n              <ProtectedRoute>\n                <Profile />\n              </ProtectedRoute>\n            } />\n            \n            <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n          </Routes>\n        </div>\n      </AuthProvider>\n    </Router>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":3879,"size_tokens":null},"src/components/AddHabitModal.js":{"content":"import React, { useState, useEffect } from 'react';\n\nconst categories = [\n  { id: 'health', name: 'Health', icon: 'üèÉ' },\n  { id: 'fitness', name: 'Fitness', icon: 'üí™' },\n  { id: 'mindfulness', name: 'Mindfulness', icon: 'üßò' },\n  { id: 'learning', name: 'Learning', icon: 'üìö' },\n  { id: 'productivity', name: 'Productivity', icon: '‚ö°' },\n  { id: 'social', name: 'Social', icon: 'üë•' },\n  { id: 'finance', name: 'Finance', icon: 'üí∞' },\n  { id: 'creativity', name: 'Creativity', icon: 'üé®' },\n  { id: 'other', name: 'Other', icon: '‚ú®' },\n];\n\nconst frequencies = ['daily', 'weekly', 'weekdays', 'weekends'];\n\nconst AddHabitModal = ({ habit, onClose, onSave, onDelete }) => {\n  const [formData, setFormData] = useState({\n    name: '',\n    category: 'other',\n    frequency: 'daily',\n  });\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n\n  useEffect(() => {\n    if (habit) {\n      setFormData({\n        name: habit.name || '',\n        category: habit.category || 'other',\n        frequency: habit.frequency || 'daily',\n      });\n    }\n  }, [habit]);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formData.name.trim()) return;\n    onSave(formData);\n  };\n\n  const handleDelete = () => {\n    if (showDeleteConfirm) {\n      onDelete();\n    } else {\n      setShowDeleteConfirm(true);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 z-50 flex items-end overflow-hidden\">\n      <form \n        onSubmit={handleSubmit} \n        className=\"bg-white w-full max-h-[85vh] rounded-t-3xl overflow-hidden flex flex-col animate-slide-up\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-4 py-4 border-b border-gray-100 flex-shrink-0\">\n          <h2 className=\"text-heading font-poppins text-dark\">{habit ? 'Edit Habit' : 'Add New Habit'}</h2>\n          <button \n            type=\"button\" \n            onClick={onClose} \n            className=\"p-1 text-gray-400 hover:text-gray-600\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Scrollable Content */}\n        <div className=\"flex-1 overflow-y-auto px-4 py-4\">\n          {/* Habit Name */}\n          <div className=\"mb-6\">\n            <label className=\"block text-body text-gray-600 mb-2 font-medium\">Habit Name</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              className=\"input-field w-full\"\n              placeholder=\"e.g., Drink 8 glasses of water\"\n              autoFocus\n            />\n          </div>\n\n          {/* Category */}\n          <div className=\"mb-6\">\n            <label className=\"block text-body text-gray-600 mb-3 font-medium\">Category</label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {categories.map((cat) => (\n                <button\n                  key={cat.id}\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, category: cat.id })}\n                  className={`p-3 rounded-lg border-2 text-center transition-all ${\n                    formData.category === cat.id\n                      ? 'border-primary bg-primary/10 text-primary'\n                      : 'border-gray-200 text-gray-600'\n                  }`}\n                >\n                  <span className=\"text-xl block mb-1\">{cat.icon}</span>\n                  <span className=\"text-xs font-medium\">{cat.name}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Frequency */}\n          <div className=\"mb-8\">\n            <label className=\"block text-body text-gray-600 mb-3 font-medium\">Frequency</label>\n            <div className=\"flex flex-wrap gap-2\">\n              {frequencies.map((freq) => (\n                <button\n                  key={freq}\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, frequency: freq })}\n                  className={`px-4 py-2 rounded-full text-body font-medium transition-all ${\n                    formData.frequency === freq\n                      ? 'bg-primary text-white'\n                      : 'bg-gray-100 text-gray-600'\n                  }`}\n                >\n                  {freq.charAt(0).toUpperCase() + freq.slice(1)}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Action Buttons - Fixed at Bottom */}\n        <div className=\"flex-shrink-0 bg-white border-t border-gray-100 px-4 py-4 space-y-3 pb-24\">\n          <button \n            type=\"submit\"\n            className=\"btn-primary w-full py-3 rounded-lg font-medium text-white\"\n          >\n            {habit ? 'Update Habit' : 'Add Habit'}\n          </button>\n\n          {habit && onDelete && (\n            <button\n              type=\"button\"\n              onClick={handleDelete}\n              className={`w-full py-3 rounded-lg text-body font-medium transition-all ${\n                showDeleteConfirm\n                  ? 'bg-red-500 text-white'\n                  : 'bg-red-50 text-red-600 hover:bg-red-100'\n              }`}\n            >\n              {showDeleteConfirm ? 'Confirm Delete' : 'Delete Habit'}\n            </button>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default AddHabitModal;\n","path":null,"size_bytes":5678,"size_tokens":null},"src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  html {\n    font-size: 16px;\n  }\n\n  body {\n    font-family: 'Poppins', sans-serif;\n    background-color: #f9fafb;\n    color: #000000;\n    min-height: 100vh;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    font-family: 'Poppins', sans-serif;\n    font-weight: 600;\n  }\n\n  p, span, label, input, textarea, button {\n    font-family: 'Roboto', sans-serif;\n  }\n}\n\n@layer components {\n  .btn-primary {\n    @apply bg-primary text-white py-2 px-4 rounded-lg font-medium text-body transition-all duration-200 hover:bg-primary-light active:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed;\n  }\n\n  .btn-secondary {\n    @apply bg-white text-primary border border-primary py-2 px-4 rounded-lg font-medium text-body transition-all duration-200 hover:bg-gray-50 active:bg-gray-100;\n  }\n\n  .btn-ghost {\n    @apply bg-transparent text-primary py-2 px-4 rounded-lg font-medium text-body transition-all duration-200 hover:bg-gray-100;\n  }\n\n  .input-field {\n    @apply w-full px-4 py-3 border border-gray-200 rounded-lg text-body focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200;\n  }\n\n  .card {\n    @apply bg-white rounded-xl shadow-sm p-4;\n  }\n\n  .page-container {\n    @apply min-h-screen pb-20 px-4 pt-4;\n  }\n\n  .nav-item {\n    @apply flex flex-col items-center justify-center py-2 px-3 text-gray-400 transition-colors duration-200;\n  }\n\n  .nav-item.active {\n    @apply text-primary;\n  }\n\n  .habit-card {\n    @apply bg-white rounded-xl p-4 shadow-sm border border-gray-100 transition-all duration-200;\n  }\n\n  .status-done {\n    @apply bg-primary text-white;\n  }\n\n  .status-missed {\n    @apply bg-red-500 text-white;\n  }\n\n  .status-pending {\n    @apply bg-gray-200 text-gray-600;\n  }\n}\n\n@layer utilities {\n  .text-heading {\n    font-size: 16px;\n    line-height: 1.4;\n    font-weight: 600;\n  }\n\n  .text-subheading {\n    font-size: 14px;\n    line-height: 1.4;\n    font-weight: 500;\n  }\n\n  .text-body {\n    font-size: 11px;\n    line-height: 1.5;\n    font-weight: 400;\n  }\n\n  .text-small {\n    font-size: 10px;\n    line-height: 1.4;\n    font-weight: 400;\n  }\n\n  .safe-bottom {\n    padding-bottom: env(safe-area-inset-bottom, 0px);\n  }\n\n  .hide-scrollbar {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n\n  .hide-scrollbar::-webkit-scrollbar {\n    display: none;\n  }\n}\n\n@keyframes slide-up {\n  from {\n    transform: translateY(100%);\n  }\n  to {\n    transform: translateY(0);\n  }\n}\n\n.animate-slide-up {\n  animation: slide-up 0.3s ease-out;\n}\n","path":null,"size_bytes":2853,"size_tokens":null},"src/index.js":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","path":null,"size_bytes":254,"size_tokens":null},"src/pages/Home.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\nimport HabitCard from '../components/HabitCard';\nimport AddHabitModal from '../components/AddHabitModal';\nimport SelectHabitModal from '../components/SelectHabitModal';\n\nconst Home = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [habits, setHabits] = useState([]);\n  const [todayLogs, setTodayLogs] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showSelectModal, setShowSelectModal] = useState(false);\n  const [editHabit, setEditHabit] = useState(null);\n  const [goalsCount, setGoalsCount] = useState(0);\n  const [badgesCount, setBadgesCount] = useState(0);\n  const [communityCount, setCommunityCount] = useState(0);\n  const [userPoints, setUserPoints] = useState(0);\n\n  const today = new Date().toISOString().split('T')[0];\n\n  useEffect(() => {\n    if (user) {\n      fetchHabits();\n      fetchGoalsAndBadges();\n      const savedPoints = localStorage.getItem(`user_points_${user.id}`);\n      if (savedPoints) {\n        setUserPoints(parseInt(savedPoints));\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n\n  const fetchHabits = async () => {\n    try {\n      const { data: habitsData, error: habitsError } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (habitsError) throw habitsError;\n      setHabits(habitsData || []);\n\n      const habitIds = habitsData?.map(h => h.id) || [];\n      if (habitIds.length > 0) {\n        const { data: logsData, error: logsError } = await supabase\n          .from('habit_logs')\n          .select('*')\n          .in('habit_id', habitIds)\n          .eq('log_date', today);\n\n        if (logsError) throw logsError;\n\n        const logsMap = {};\n        logsData?.forEach(log => {\n          logsMap[log.habit_id] = log;\n        });\n        setTodayLogs(logsMap);\n      }\n    } catch (error) {\n      console.error('Error fetching habits:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchGoalsAndBadges = async () => {\n    try {\n      const { data: goalsData } = await supabase\n        .from('goals')\n        .select('*')\n        .eq('user_id', user.id);\n\n      const { data: badgesData } = await supabase\n        .from('user_badges')\n        .select('*')\n        .eq('user_id', user.id);\n\n      const { data: communitiesData } = await supabase\n        .from('community_members')\n        .select('*')\n        .eq('user_id', user.id);\n\n      const { data: allLogs } = await supabase\n        .from('habit_logs')\n        .select('*')\n        .eq('status', 'done');\n\n      const userCompletedLogs = allLogs?.filter(log => {\n        const habit = habits.find(h => h.id === log.habit_id);\n        return habit?.user_id === user.id;\n      }) || [];\n\n      setGoalsCount(goalsData?.length || 0);\n      setBadgesCount(badgesData?.length || 0);\n      setCommunityCount(communitiesData?.length || 0);\n      setUserPoints(userCompletedLogs.length * 10);\n    } catch (error) {\n      console.error('Error fetching goals and badges:', error);\n    }\n  };\n\n\n  const handleAddHabit = async (habitData) => {\n    try {\n      const { data, error } = await supabase\n        .from('habits')\n        .insert([{ ...habitData, user_id: user.id }])\n        .select()\n        .single();\n\n      if (error) throw error;\n      setHabits([data, ...habits]);\n      setShowAddModal(false);\n    } catch (error) {\n      console.error('Error adding habit:', error);\n    }\n  };\n\n  const handleUpdateHabit = async (habitId, habitData) => {\n    try {\n      const { data, error } = await supabase\n        .from('habits')\n        .update(habitData)\n        .eq('id', habitId)\n        .select()\n        .single();\n\n      if (error) throw error;\n      setHabits(habits.map(h => h.id === habitId ? data : h));\n      setEditHabit(null);\n      setShowAddModal(false);\n    } catch (error) {\n      console.error('Error updating habit:', error);\n    }\n  };\n\n  const handleDeleteHabit = async (habitId) => {\n    try {\n      const { error } = await supabase\n        .from('habits')\n        .delete()\n        .eq('id', habitId);\n\n      if (error) throw error;\n      setHabits(habits.filter(h => h.id !== habitId));\n      setEditHabit(null);\n      setShowAddModal(false);\n    } catch (error) {\n      console.error('Error deleting habit:', error);\n    }\n  };\n\n  const completedCount = Object.values(todayLogs).filter(l => l.status === 'done').length;\n  const totalCount = habits.length;\n  const progressPercent = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;\n\n  const getDayName = () => {\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    return days[new Date().getDay()];\n  };\n\n  const formatDate = () => {\n    const options = { month: 'long', day: 'numeric', year: 'numeric' };\n    return new Date().toLocaleDateString('en-US', options);\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Daily Rise\" />\n      \n      <div className=\"px-4 py-4\">\n        {/* Tagline Section */}\n        <div className=\"bg-gradient-to-r from-primary to-green-700 rounded-xl p-4 mb-6 text-white\">\n          <h1 className=\"text-heading font-poppins font-bold mb-1\">Level up your life,</h1>\n          <p className=\"text-body\">every single day</p>\n          <p className=\"text-xs mt-3 opacity-90\">Join thousands building better habits together</p>\n        </div>\n\n        <div className=\"mb-6\">\n          <p className=\"text-body text-gray-500\">{getDayName()}</p>\n          <p className=\"text-subheading text-dark\">{formatDate()}</p>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3 mb-6\">\n          <div className=\"card\">\n            <p className=\"text-body text-gray-500\">Today's Progress</p>\n            <p className=\"text-heading text-primary mt-1\">{completedCount}/{totalCount}</p>\n            <p className=\"text-xs text-gray-400 mt-1\">{progressPercent}% Done</p>\n          </div>\n          <div className=\"card\">\n            <p className=\"text-body text-gray-500\">Badges Earned</p>\n            <p className=\"text-heading text-primary mt-1\">{badgesCount}</p>\n            <p className=\"text-xs text-gray-400 mt-1\">Achievements</p>\n          </div>\n          <div className=\"card\">\n            <p className=\"text-body text-gray-500\">Points</p>\n            <p className=\"text-heading text-primary mt-1\">{userPoints}</p>\n            <p className=\"text-xs text-gray-400 mt-1\">Total Earned</p>\n          </div>\n          <div className=\"card\">\n            <p className=\"text-body text-gray-500\">Communities</p>\n            <p className=\"text-heading text-primary mt-1\">{communityCount}</p>\n            <p className=\"text-xs text-gray-400 mt-1\">Groups Joined</p>\n          </div>\n        </div>\n\n        {/* DailyRise Highlights */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-subheading font-poppins text-dark mb-3\">What Makes Us Unique</h3>\n          \n          {/* Feature 1: Gamified Progress */}\n          <div \n            onClick={() => navigate('/badges')}\n            className=\"card mb-3 cursor-pointer hover:shadow-md transition-shadow\"\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-lg\">üèÜ</span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"text-body font-medium text-dark\">Gamified Progress</p>\n                <p className=\"text-xs text-gray-500 mt-1\">Earn badges & rewards as you complete habits</p>\n                <p className=\"text-xs text-primary font-medium mt-2\">{badgesCount} Badge{badgesCount !== 1 ? 's' : ''} Earned</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Feature 2: Goals Setting */}\n          <div \n            onClick={() => navigate('/goals')}\n            className=\"card mb-3 cursor-pointer hover:shadow-md transition-shadow\"\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-lg\">‚ö°</span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"text-body font-medium text-dark\">Set & Achieve Goals</p>\n                <p className=\"text-xs text-gray-500 mt-1\">Connect habits with your personal goals</p>\n                <p className=\"text-xs text-primary font-medium mt-2\">{goalsCount} Goal{goalsCount !== 1 ? 's' : ''} Created</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Feature 3: Smart Insights */}\n          <div \n            onClick={() => navigate('/progress')}\n            className=\"card mb-3 cursor-pointer hover:shadow-md transition-shadow\"\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-lg\">üìä</span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"text-body font-medium text-dark\">Smart Insights</p>\n                <p className=\"text-xs text-gray-500 mt-1\">Detailed analytics & trends for your habits</p>\n                <p className=\"text-xs text-primary font-medium mt-2\">View your progress calendar</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Feature 4: Community Accountability */}\n          <div \n            onClick={() => navigate('/community')}\n            className=\"card mb-6 cursor-pointer hover:shadow-md transition-shadow\"\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <span className=\"text-lg\">üë•</span>\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"text-body font-medium text-dark\">Community Accountability</p>\n                <p className=\"text-xs text-gray-500 mt-1\">Join groups and build habits together</p>\n                <p className=\"text-xs text-primary font-medium mt-2\">{communityCount} Group{communityCount !== 1 ? 's' : ''} Joined</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-subheading font-poppins text-dark\">My Habits</h2>\n          <button\n            onClick={() => {\n              setEditHabit(null);\n              setShowAddModal(true);\n            }}\n            className=\"flex items-center gap-1 text-body text-primary\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n            </svg>\n            Add Habit\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : habits.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n              </svg>\n            </div>\n            <p className=\"text-body text-gray-500 mb-4\">No habits yet. Start by adding one!</p>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setShowAddModal(true)}\n                className=\"btn-primary flex-1\"\n              >\n                Create New Habit\n              </button>\n              <button\n                onClick={() => setShowSelectModal(true)}\n                className=\"flex-1 py-3 rounded-lg bg-gray-100 text-gray-600 text-body font-medium\"\n              >\n                Select Habit\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {habits.map((habit) => (\n              <HabitCard\n                key={habit.id}\n                habit={habit}\n                onEdit={() => {\n                  setEditHabit(habit);\n                  setShowAddModal(true);\n                }}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {showAddModal && (\n        <AddHabitModal\n          habit={editHabit}\n          onClose={() => {\n            setShowAddModal(false);\n            setEditHabit(null);\n          }}\n          onSave={editHabit ? (data) => handleUpdateHabit(editHabit.id, data) : handleAddHabit}\n          onDelete={editHabit ? () => handleDeleteHabit(editHabit.id) : null}\n        />\n      )}\n\n      {showSelectModal && (\n        <SelectHabitModal\n          onClose={() => setShowSelectModal(false)}\n          onSelect={(habit) => {\n            setEditHabit(habit);\n            setShowSelectModal(false);\n            setShowAddModal(true);\n          }}\n        />\n      )}\n    </Layout>\n  );\n};\n\nexport default Home;\n","path":null,"size_bytes":13906,"size_tokens":null},"tailwind.config.js":{"content":"/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    \"./src/**/*.{js,jsx,ts,tsx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#043915',\n        dark: '#000000',\n        light: '#ffffff',\n        'primary-light': '#065f23',\n        'primary-dark': '#032810',\n        gray: {\n          50: '#f9fafb',\n          100: '#f3f4f6',\n          200: '#e5e7eb',\n          300: '#d1d5db',\n          400: '#9ca3af',\n          500: '#6b7280',\n          600: '#4b5563',\n          700: '#374151',\n          800: '#1f2937',\n          900: '#111827',\n        }\n      },\n      fontFamily: {\n        poppins: ['Poppins', 'sans-serif'],\n        roboto: ['Roboto', 'sans-serif'],\n      },\n      fontSize: {\n        'heading': ['16px', { lineHeight: '1.4', fontWeight: '600' }],\n        'subheading': ['14px', { lineHeight: '1.4', fontWeight: '500' }],\n        'body': ['11px', { lineHeight: '1.5', fontWeight: '400' }],\n        'small': ['10px', { lineHeight: '1.4', fontWeight: '400' }],\n      },\n    },\n  },\n  plugins: [],\n}\n","path":null,"size_bytes":1053,"size_tokens":null},"src/App.css":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"src/components/BottomNav.js":{"content":"import React from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst BottomNav = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const navItems = [\n    {\n      id: 'home',\n      label: 'Home',\n      path: '/home',\n      icon: (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n        </svg>\n      ),\n    },\n    {\n      id: 'progress',\n      label: 'Progress',\n      path: '/progress',\n      icon: (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n        </svg>\n      ),\n    },\n    {\n      id: 'logs',\n      label: 'Logs',\n      path: '/logs',\n      icon: (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\n        </svg>\n      ),\n    },\n    {\n      id: 'notifications',\n      label: 'Alerts',\n      path: '/notifications',\n      icon: (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n        </svg>\n      ),\n    },\n    {\n      id: 'rewards',\n      label: 'Rewards',\n      path: '/rewards',\n      icon: (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n      ),\n    },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 safe-bottom z-50\">\n      <div className=\"max-w-md mx-auto flex justify-around items-center py-2\">\n        {navItems.map((item) => {\n          const isActive = location.pathname === item.path;\n          return (\n            <button\n              key={item.id}\n              onClick={() => navigate(item.path)}\n              className={`nav-item ${isActive ? 'active' : ''}`}\n            >\n              <span className={isActive ? 'text-primary' : 'text-gray-400'}>\n                {item.icon}\n              </span>\n              <span className={`text-small mt-1 ${isActive ? 'text-primary font-medium' : 'text-gray-400'}`}>\n                {item.label}\n              </span>\n            </button>\n          );\n        })}\n      </div>\n    </nav>\n  );\n};\n\nexport default BottomNav;\n","path":null,"size_bytes":3583,"size_tokens":null},"src/components/HabitCard.js":{"content":"import React from 'react';\n\nconst categoryIcons = {\n  health: 'üèÉ',\n  fitness: 'üí™',\n  mindfulness: 'üßò',\n  learning: 'üìö',\n  productivity: '‚ö°',\n  social: 'üë•',\n  finance: 'üí∞',\n  creativity: 'üé®',\n  other: '‚ú®',\n};\n\nconst HabitCard = ({ habit, onEdit }) => {\n  return (\n    <div className=\"habit-card flex items-center gap-3\">\n      <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n        <span className=\"text-lg\">{categoryIcons[habit.category] || '‚ú®'}</span>\n      </div>\n\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-subheading truncate text-dark\">\n            {habit.name}\n          </h3>\n        </div>\n        <p className=\"text-small text-gray-400 capitalize\">{habit.frequency || 'Daily'}</p>\n      </div>\n\n      <button\n        onClick={onEdit}\n        className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" />\n        </svg>\n      </button>\n    </div>\n  );\n};\n\nexport default HabitCard;\n","path":null,"size_bytes":1387,"size_tokens":null},"src/pages/Badges.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\n\nconst Badges = () => {\n  const { user } = useAuth();\n  const [badges, setBadges] = useState([]);\n  const [userBadges, setUserBadges] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n  }, [user]);\n\n  const fetchData = async () => {\n    try {\n      const { data: allBadges } = await supabase\n        .from('badges')\n        .select('*')\n        .order('points_required', { ascending: true });\n\n      const { data: earned } = await supabase\n        .from('user_badges')\n        .select('badge_id, earned_at')\n        .eq('user_id', user.id);\n\n      setBadges(allBadges || []);\n      setUserBadges(earned || []);\n    } catch (error) {\n      console.error('Error fetching badges:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const hasEarned = (badgeId) => {\n    return userBadges.some(ub => ub.badge_id === badgeId);\n  };\n\n  const getEarnedDate = (badgeId) => {\n    const earned = userBadges.find(ub => ub.badge_id === badgeId);\n    if (!earned) return null;\n    return new Date(earned.earned_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  const earnedCount = userBadges.length;\n\n  return (\n    <Layout>\n      <Header title=\"Badges\" />\n      \n      <div className=\"px-4 py-4 pb-32\">\n        <div className=\"card mb-6 bg-gradient-to-r from-primary to-primary/80\">\n          <div className=\"text-white\">\n            <p className=\"text-small\">Badges Earned</p>\n            <p className=\"text-5xl font-bold my-2\">{earnedCount}</p>\n            <p className=\"text-body\">out of {badges.length} total</p>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : badges.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-9 1h18M7 20h10a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2v9a2 2 0 002 2z\" />\n              </svg>\n            </div>\n            <p className=\"text-body text-gray-500\">No badges available yet</p>\n          </div>\n        ) : (\n          <div>\n            <h3 className=\"text-subheading font-poppins text-dark mb-4\">All Badges</h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              {badges.map((badge) => {\n                const earned = hasEarned(badge.id);\n                return (\n                  <div \n                    key={badge.id} \n                    className={`card text-center p-4 transition-all ${\n                      earned ? 'bg-green-50 border border-green-200' : 'opacity-60'\n                    }`}\n                  >\n                    <div className=\"text-4xl mb-2\">{badge.icon}</div>\n                    <h4 className=\"text-body font-medium text-gray-800\">{badge.name}</h4>\n                    <p className=\"text-xs text-gray-500 mt-2\">{badge.points_required} pts</p>\n                    {earned && (\n                      <div className=\"mt-3 pt-3 border-t border-green-200\">\n                        <p className=\"text-xs text-green-600 font-medium\">\n                          ‚úì Earned {getEarnedDate(badge.id)}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n};\n\nexport default Badges;\n","path":null,"size_bytes":4109,"size_tokens":null},"src/components/ChallengeReceivedModal.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport Swal from 'sweetalert2';\n\nconst ChallengeReceivedModal = ({ isOpen, challengeId, onClose, onRespond }) => {\n  const [challenge, setChallenge] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [responding, setResponding] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && challengeId) {\n      fetchChallenge();\n    }\n  }, [isOpen, challengeId]);\n\n  const fetchChallenge = async () => {\n    try {\n      const { data: challengeData } = await supabase\n        .from('challenges')\n        .select(`\n          id,\n          status,\n          created_at,\n          challenger_id,\n          habit_id,\n          community_id,\n          habits:habit_id (name),\n          challenger:challenger_id (firstname, lastname, image, age, gender)\n        `)\n        .eq('id', challengeId)\n        .single();\n\n      setChallenge(challengeData);\n    } catch (error) {\n      console.error('Error fetching challenge:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAccept = async () => {\n    setResponding(true);\n    try {\n      const { error } = await supabase\n        .from('challenges')\n        .update({ status: 'completed', completed_at: new Date().toISOString() })\n        .eq('id', challengeId);\n\n      if (error) throw error;\n\n      Swal.fire({\n        icon: 'success',\n        title: 'Challenge Accepted!',\n        text: 'Complete the habit to earn 25 points!',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n\n      onRespond?.();\n      onClose();\n    } catch (error) {\n      console.error('Error accepting challenge:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to accept challenge',\n        confirmButtonColor: '#043915',\n      });\n    } finally {\n      setResponding(false);\n    }\n  };\n\n  const handleDecline = async () => {\n    setResponding(true);\n    try {\n      const { error } = await supabase\n        .from('challenges')\n        .update({ status: 'declined' })\n        .eq('id', challengeId);\n\n      if (error) throw error;\n\n      Swal.fire({\n        icon: 'info',\n        title: 'Challenge Declined',\n        text: 'You declined the challenge',\n        timer: 1500,\n        confirmButtonColor: '#043915',\n      });\n\n      onRespond?.();\n      onClose();\n    } catch (error) {\n      console.error('Error declining challenge:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to decline challenge',\n        confirmButtonColor: '#043915',\n      });\n    } finally {\n      setResponding(false);\n    }\n  };\n\n  if (!isOpen) return null;\n  if (loading) return null;\n  if (!challenge) return null;\n\n  const challengerName = `${challenge.challenger?.firstname} ${challenge.challenger?.lastname}`;\n  const habitName = challenge.habits?.name || 'Unknown Habit';\n  const userAge = challenge.challenger?.age || 'N/A';\n  const userGender = challenge.challenger?.gender || 'N/A';\n  const userImage = challenge.challenger?.image;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl max-w-sm w-full overflow-hidden\">\n        {/* Header Background */}\n        <div className=\"bg-gradient-to-r from-primary to-primary/80 h-24\"></div>\n        \n        {/* Profile Card */}\n        <div className=\"px-6 pb-6 -mt-12 relative\">\n          {/* Profile Image */}\n          <div className=\"flex justify-center mb-4\">\n            <img\n              src={userImage || 'https://via.placeholder.com/100?text=User'}\n              alt={challengerName}\n              className=\"w-24 h-24 rounded-full border-4 border-white shadow-lg object-cover\"\n            />\n          </div>\n\n          {/* User Info */}\n          <div className=\"text-center mb-4\">\n            <h3 className=\"text-lg font-bold text-dark\">{challengerName}</h3>\n            <div className=\"flex justify-center gap-4 mt-2\">\n              <p className=\"text-small text-gray-600\">\n                <span className=\"font-semibold\">Age:</span> {userAge}\n              </p>\n              <p className=\"text-small text-gray-600\">\n                <span className=\"font-semibold\">Gender:</span> {userGender}\n              </p>\n            </div>\n          </div>\n\n          {/* Challenge Details */}\n          <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-4 mb-4\">\n            <p className=\"text-small text-blue-900 mb-2\">\n              üéØ <span className=\"font-semibold\">{challengerName}</span> challenged you to:\n            </p>\n            <p className=\"text-base font-bold text-primary text-center\">\n              \"{habitName}\"\n            </p>\n          </div>\n\n          {/* Reward Info */}\n          <div className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 border border-yellow-200 rounded-xl p-3 mb-5\">\n            <p className=\"text-small text-yellow-900 text-center\">\n              ‚ú® Complete this habit to earn <span className=\"font-bold text-yellow-700\">25 Points</span>!\n            </p>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleDecline}\n              disabled={responding}\n              className=\"flex-1 px-4 py-2 bg-gray-100 text-dark rounded-lg font-medium text-small hover:bg-gray-200 disabled:opacity-50 transition\"\n            >\n              {responding ? 'Processing...' : 'üëã Decline'}\n            </button>\n            <button\n              onClick={handleAccept}\n              disabled={responding}\n              className=\"flex-1 px-4 py-2 bg-primary text-white rounded-lg font-medium text-small hover:bg-primary/90 disabled:opacity-50 transition shadow-md\"\n            >\n              {responding ? 'Processing...' : '‚ú® Accept'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChallengeReceivedModal;\n","path":null,"size_bytes":6059,"size_tokens":null},"src/components/Leaderboard.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport { useChallenges } from '../hooks/useChallenges';\n\nconst Leaderboard = ({ communityId, onChallenge, onViewChallenge }) => {\n  const { user } = useAuth();\n  const [members, setMembers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [sentChallenges, setSentChallenges] = useState({});\n  const { sentChallenges: hookChallenges } = useChallenges(user?.id, communityId);\n\n  useEffect(() => {\n    setSentChallenges(hookChallenges);\n  }, [hookChallenges]);\n\n  useEffect(() => {\n    if (communityId && user?.id) {\n      fetchLeaderboard();\n      fetchSentChallenges();\n      \n      // Auto-refresh sent challenges every 2 seconds\n      const interval = setInterval(fetchSentChallenges, 2000);\n\n      // Subscribe to real-time leaderboard updates\n      const channel = supabase.channel(`leaderboard-${communityId}`)\n        .on('postgres_changes', {\n          event: '*',\n          schema: 'public',\n          table: 'community_leaderboard'\n        }, (payload) => {\n          if (payload.new?.community_id === communityId) {\n            fetchLeaderboard();\n          }\n        })\n        .subscribe();\n\n      return () => {\n        clearInterval(interval);\n        channel.unsubscribe();\n      };\n    }\n  }, [communityId, user?.id]);\n\n  const fetchLeaderboard = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('community_leaderboard')\n        .select('*')\n        .eq('community_id', communityId)\n        .order('rank', { ascending: true });\n\n      if (error) throw error;\n      setMembers(data || []);\n    } catch (error) {\n      console.error('Error fetching leaderboard:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchSentChallenges = async () => {\n    try {\n      // Fetch challenges where user is challenger\n      const { data: sentData } = await supabase\n        .from('challenges')\n        .select('challenged_user_id, status')\n        .eq('challenger_id', user?.id)\n        .neq('status', 'declined');\n\n      // Fetch challenges where user is challenged_user\n      const { data: receivedData } = await supabase\n        .from('challenges')\n        .select('challenger_id, status')\n        .eq('challenged_user_id', user?.id)\n        .neq('status', 'declined');\n\n      const map = {};\n      \n      // Add challenges where user is challenger\n      sentData?.forEach(c => {\n        map[c.challenged_user_id] = c.status;\n      });\n      \n      // Add challenges where user is challenged_user\n      receivedData?.forEach(c => {\n        map[c.challenger_id] = c.status;\n      });\n      \n      setSentChallenges(map);\n    } catch (error) {\n      console.error('Error fetching sent challenges:', error);\n    }\n  };\n\n  const getButtonState = (memberId) => {\n    const status = sentChallenges[memberId];\n    if (status === 'pending') return 'pending';\n    if (status === 'accepted') return 'accepted';\n    if (status === 'completed') return 'completed';\n    return 'default';\n  };\n\n  const handleButtonClick = (memberId) => {\n    const state = getButtonState(memberId);\n    if (state === 'default') {\n      onChallenge(memberId);\n    } else if (state === 'accepted' || state === 'completed') {\n      onViewChallenge(memberId);\n    }\n  };\n\n  const getButtonText = (memberId) => {\n    const state = getButtonState(memberId);\n    if (state === 'pending') return '‚è≥ Pending';\n    if (state === 'accepted' || state === 'completed') return 'üëÅÔ∏è View';\n    return 'üéØ Challenge';\n  };\n\n  const getButtonStyle = (memberId) => {\n    const state = getButtonState(memberId);\n    if (state === 'pending') {\n      return 'px-3 py-1 bg-yellow-300 text-dark text-xs rounded font-medium cursor-not-allowed opacity-70';\n    }\n    if (state === 'accepted' || state === 'completed') {\n      return 'px-3 py-1 bg-green-500 text-white text-xs rounded font-medium hover:bg-green-600';\n    }\n    return 'px-3 py-1 bg-primary text-white text-xs rounded font-medium hover:bg-primary/90';\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-8 text-gray-500\">Loading leaderboard...</div>;\n  }\n\n  if (members.length === 0) {\n    return <div className=\"text-center py-8 text-gray-500\">No members yet</div>;\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <h3 className=\"text-body font-semibold text-dark px-4 mb-3\">üèÜ Leaderboard</h3>\n      {members.map((member) => (\n        <div key={member.user_id} className=\"card flex items-center justify-between\">\n          <div className=\"flex items-center flex-1\">\n            <div className=\"text-lg font-bold text-primary w-8 text-center\">\n              #{member.rank}\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <p className=\"text-body font-medium text-dark\">\n                {member.firstname} {member.lastname}\n              </p>\n              <p className=\"text-small text-gray-500\">\n                {member.total_points} points\n              </p>\n            </div>\n          </div>\n          {member.user_id !== user?.id && (\n            <button\n              onClick={() => handleButtonClick(member.user_id)}\n              disabled={getButtonState(member.user_id) === 'pending'}\n              className={getButtonStyle(member.user_id)}\n            >\n              {getButtonText(member.user_id)}\n            </button>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Leaderboard;\n","path":null,"size_bytes":5523,"size_tokens":null},"src/pages/Register.js":{"content":"import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Register = () => {\n  const navigate = useNavigate();\n  const { signUp } = useAuth();\n  const [formData, setFormData] = useState({\n    firstname: '',\n    lastname: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n    setError('');\n  };\n\n  const validateForm = () => {\n    if (!formData.firstname || !formData.lastname || !formData.email || !formData.password || !formData.confirmPassword) {\n      setError('Please fill in all fields');\n      return false;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) {\n      setError('Please enter a valid email');\n      return false;\n    }\n\n    if (formData.password.length < 6) {\n      setError('Password must be at least 6 characters');\n      return false;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      setError('Passwords do not match');\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) return;\n\n    setLoading(true);\n    const { error } = await signUp(\n      formData.email,\n      formData.password,\n      formData.firstname,\n      formData.lastname\n    );\n    setLoading(false);\n\n    if (error) {\n      setError(error.message);\n    } else {\n      navigate('/home');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col px-6 py-8\">\n      <div className=\"flex-1 flex flex-col justify-center max-w-md mx-auto w-full\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-heading font-poppins text-dark mb-2\">Create Account</h1>\n          <p className=\"text-body text-gray-500\">Start your journey to better habits</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {error && (\n            <div className=\"bg-red-50 text-red-600 text-body p-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">First Name</label>\n              <input\n                type=\"text\"\n                name=\"firstname\"\n                value={formData.firstname}\n                onChange={handleChange}\n                className=\"input-field\"\n                placeholder=\"First name\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Last Name</label>\n              <input\n                type=\"text\"\n                name=\"lastname\"\n                value={formData.lastname}\n                onChange={handleChange}\n                className=\"input-field\"\n                placeholder=\"Last name\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-body text-gray-600 mb-1\">Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"input-field\"\n              placeholder=\"Enter your email\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-body text-gray-600 mb-1\">Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"input-field\"\n              placeholder=\"Create a password\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-body text-gray-600 mb-1\">Confirm Password</label>\n            <input\n              type=\"password\"\n              name=\"confirmPassword\"\n              value={formData.confirmPassword}\n              onChange={handleChange}\n              className=\"input-field\"\n              placeholder=\"Confirm your password\"\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"btn-primary w-full py-3\"\n          >\n            {loading ? 'Creating Account...' : 'Create Account'}\n          </button>\n        </form>\n\n        <p className=\"text-center text-body text-gray-500 mt-6\">\n          Already have an account?{' '}\n          <Link to=\"/login\" className=\"text-primary font-medium hover:underline\">\n            Sign In\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","path":null,"size_bytes":5169,"size_tokens":null},"src/components/Header.js":{"content":"import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Header = ({ title, showProfile = true, showBack = false }) => {\n  const navigate = useNavigate();\n  const { userProfile } = useAuth();\n\n  return (\n    <header className=\"flex items-center justify-between py-4 px-4 bg-white sticky top-0 z-40 border-b border-gray-100\">\n      <div className=\"flex items-center gap-3\">\n        {showBack && (\n          <button \n            onClick={() => navigate(-1)}\n            className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </button>\n        )}\n        <h1 className=\"text-heading font-poppins text-dark\">{title}</h1>\n      </div>\n      \n      {showProfile && (\n        <button \n          onClick={() => navigate('/profile')}\n          className=\"w-10 h-10 rounded-full bg-primary overflow-hidden flex items-center justify-center\"\n        >\n          {userProfile?.image ? (\n            <img \n              src={userProfile.image} \n              alt=\"Profile\" \n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <span className=\"text-white text-body font-medium\">\n              {userProfile?.firstname?.charAt(0) || 'U'}\n            </span>\n          )}\n        </button>\n      )}\n    </header>\n  );\n};\n\nexport default Header;\n","path":null,"size_bytes":1635,"size_tokens":null},"src/pages/Logs.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\n\nconst Logs = () => {\n  const { user } = useAuth();\n  const [habits, setHabits] = useState([]);\n  const [logs, setLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedHabit, setSelectedHabit] = useState(null);\n  const [editingLog, setEditingLog] = useState(null);\n  const [noteInput, setNoteInput] = useState('');\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n\n  const fetchData = async () => {\n    try {\n      const { data: habitsData } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id);\n\n      setHabits(habitsData || []);\n\n      if (habitsData && habitsData.length > 0) {\n        const { data: logsData } = await supabase\n          .from('habit_logs')\n          .select('*, habits(name, category)')\n          .in('habit_id', habitsData.map(h => h.id))\n          .order('log_date', { ascending: false })\n          .limit(100);\n\n        setLogs(logsData || []);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateNote = async (logId) => {\n    try {\n      const { error } = await supabase\n        .from('habit_logs')\n        .update({ notes: noteInput })\n        .eq('id', logId);\n\n      if (error) throw error;\n\n      setLogs(logs.map(l => l.id === logId ? { ...l, notes: noteInput } : l));\n      setEditingLog(null);\n      setNoteInput('');\n    } catch (error) {\n      console.error('Error updating note:', error);\n    }\n  };\n\n  const formatDate = (dateStr) => {\n    const date = new Date(dateStr);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) return 'Today';\n    if (date.toDateString() === yesterday.toDateString()) return 'Yesterday';\n    \n    return date.toLocaleDateString('en-US', { \n      weekday: 'short', \n      month: 'short', \n      day: 'numeric' \n    });\n  };\n\n  const groupLogsByDate = () => {\n    const filteredLogs = selectedHabit \n      ? logs.filter(l => l.habit_id === selectedHabit)\n      : logs;\n\n    const grouped = {};\n    filteredLogs.forEach(log => {\n      const date = log.log_date;\n      if (!grouped[date]) {\n        grouped[date] = [];\n      }\n      grouped[date].push(log);\n    });\n    return grouped;\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'done':\n        return (\n          <div className=\"w-8 h-8 rounded-full bg-primary flex items-center justify-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </svg>\n          </div>\n        );\n      case 'missed':\n        return (\n          <div className=\"w-8 h-8 rounded-full bg-red-500 flex items-center justify-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </div>\n        );\n      default:\n        return (\n          <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n            </svg>\n          </div>\n        );\n    }\n  };\n\n  const groupedLogs = groupLogsByDate();\n\n  return (\n    <Layout>\n      <Header title=\"Habit Logs\" />\n      \n      <div className=\"px-4 py-4\">\n        <div className=\"mb-4 overflow-x-auto hide-scrollbar\">\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setSelectedHabit(null)}\n              className={`px-3 py-1.5 rounded-full text-small whitespace-nowrap transition-all ${\n                !selectedHabit ? 'bg-primary text-white' : 'bg-gray-100 text-gray-600'\n              }`}\n            >\n              All Habits\n            </button>\n            {habits.map((habit) => (\n              <button\n                key={habit.id}\n                onClick={() => setSelectedHabit(habit.id)}\n                className={`px-3 py-1.5 rounded-full text-small whitespace-nowrap transition-all ${\n                  selectedHabit === habit.id ? 'bg-primary text-white' : 'bg-gray-100 text-gray-600'\n                }`}\n              >\n                {habit.name}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : Object.keys(groupedLogs).length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n              </svg>\n            </div>\n            <p className=\"text-body text-gray-500\">No logs yet. Start tracking your habits!</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {Object.entries(groupedLogs).map(([date, dateLogs]) => (\n              <div key={date}>\n                <h3 className=\"text-body text-gray-500 mb-3\">{formatDate(date)}</h3>\n                <div className=\"space-y-2\">\n                  {dateLogs.map((log) => (\n                    <div key={log.id} className=\"card\">\n                      <div className=\"flex items-start gap-3\">\n                        {getStatusIcon(log.status)}\n                        <div className=\"flex-1\">\n                          <h4 className=\"text-subheading text-dark\">{log.habits?.name || 'Unknown Habit'}</h4>\n                          <p className=\"text-small text-gray-400 capitalize\">{log.status}</p>\n                          \n                          {editingLog === log.id ? (\n                            <div className=\"mt-2\">\n                              <textarea\n                                value={noteInput}\n                                onChange={(e) => setNoteInput(e.target.value)}\n                                placeholder=\"Add a note...\"\n                                className=\"input-field text-small resize-none\"\n                                rows={2}\n                              />\n                              <div className=\"flex gap-2 mt-2\">\n                                <button\n                                  onClick={() => handleUpdateNote(log.id)}\n                                  className=\"btn-primary text-small py-1 px-3\"\n                                >\n                                  Save\n                                </button>\n                                <button\n                                  onClick={() => {\n                                    setEditingLog(null);\n                                    setNoteInput('');\n                                  }}\n                                  className=\"btn-ghost text-small py-1 px-3\"\n                                >\n                                  Cancel\n                                </button>\n                              </div>\n                            </div>\n                          ) : log.notes ? (\n                            <p \n                              className=\"text-body text-gray-600 mt-2 cursor-pointer hover:text-primary\"\n                              onClick={() => {\n                                setEditingLog(log.id);\n                                setNoteInput(log.notes);\n                              }}\n                            >\n                              {log.notes}\n                            </p>\n                          ) : (\n                            <button\n                              onClick={() => {\n                                setEditingLog(log.id);\n                                setNoteInput('');\n                              }}\n                              className=\"text-small text-primary mt-2\"\n                            >\n                              + Add note\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n};\n\nexport default Logs;\n","path":null,"size_bytes":9356,"size_tokens":null},"src/contexts/AuthContext.js":{"content":"import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\n\nconst AuthContext = createContext({});\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [userProfile, setUserProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkUser();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const setUserSession = async (userId) => {\n    try {\n      // Set the user session context for RLS policies\n      await supabase.rpc('set_current_user', { user_id: userId });\n    } catch (error) {\n      // If RLS function doesn't exist yet, silently continue\n      // This is a fallback - the RLS policies will still work with basic queries\n      console.log('Note: RLS session context set via headers');\n    }\n  };\n\n  const checkUser = async () => {\n    try {\n      const storedUser = localStorage.getItem('dailyrise_user');\n      if (storedUser) {\n        const userData = JSON.parse(storedUser);\n        setUser(userData);\n        await setUserSession(userData.id);\n        await fetchUserProfile(userData.id);\n      }\n    } catch (error) {\n      console.error('Error checking user:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserProfile = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('users')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (error) throw error;\n      setUserProfile(data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n      return null;\n    }\n  };\n\n  const signUp = async (email, password, firstname, lastname) => {\n    try {\n      const { data: existingUser } = await supabase\n        .from('users')\n        .select('id')\n        .eq('email', email)\n        .single();\n\n      if (existingUser) {\n        return { error: { message: 'Email already exists' } };\n      }\n\n      const { data, error } = await supabase\n        .from('users')\n        .insert([\n          {\n            email,\n            password,\n            firstname,\n            lastname,\n          }\n        ])\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      localStorage.setItem('dailyrise_user', JSON.stringify(data));\n      setUser(data);\n      setUserProfile(data);\n      await setUserSession(data.id);\n      return { data, error: null };\n    } catch (error) {\n      return { data: null, error };\n    }\n  };\n\n  const signIn = async (email, password) => {\n    try {\n      const { data, error } = await supabase\n        .from('users')\n        .select('*')\n        .eq('email', email)\n        .eq('password', password)\n        .single();\n\n      if (error || !data) {\n        return { error: { message: 'Invalid email or password' } };\n      }\n\n      localStorage.setItem('dailyrise_user', JSON.stringify(data));\n      setUser(data);\n      setUserProfile(data);\n      await setUserSession(data.id);\n      return { data, error: null };\n    } catch (error) {\n      return { data: null, error };\n    }\n  };\n\n  const signOut = async () => {\n    localStorage.removeItem('dailyrise_user');\n    setUser(null);\n    setUserProfile(null);\n  };\n\n  const updateProfile = async (updates) => {\n    try {\n      const { data, error } = await supabase\n        .from('users')\n        .update(updates)\n        .eq('id', user.id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      localStorage.setItem('dailyrise_user', JSON.stringify(data));\n      setUser(data);\n      setUserProfile(data);\n      return { data, error: null };\n    } catch (error) {\n      return { data: null, error };\n    }\n  };\n\n  const updatePassword = async (currentPassword, newPassword) => {\n    try {\n      const { data: userData } = await supabase\n        .from('users')\n        .select('password')\n        .eq('id', user.id)\n        .single();\n\n      if (userData.password !== currentPassword) {\n        return { error: { message: 'Current password is incorrect' } };\n      }\n\n      const { data, error } = await supabase\n        .from('users')\n        .update({ password: newPassword })\n        .eq('id', user.id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      localStorage.setItem('dailyrise_user', JSON.stringify(data));\n      setUser(data);\n      return { data, error: null };\n    } catch (error) {\n      return { data: null, error };\n    }\n  };\n\n  const resetPassword = async (email, newPassword) => {\n    try {\n      const { data, error } = await supabase\n        .from('users')\n        .update({ password: newPassword })\n        .eq('email', email)\n        .select()\n        .single();\n\n      if (error || !data) {\n        return { error: { message: 'Email not found' } };\n      }\n\n      return { data, error: null };\n    } catch (error) {\n      return { data: null, error };\n    }\n  };\n\n  const value = {\n    user,\n    userProfile,\n    loading,\n    signUp,\n    signIn,\n    signOut,\n    updateProfile,\n    updatePassword,\n    resetPassword,\n    fetchUserProfile,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n};\n","path":null,"size_bytes":5300,"size_tokens":null},"src/pages/Profile.js":{"content":"import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\n\nconst Profile = () => {\n  const navigate = useNavigate();\n  const { userProfile, signOut, updateProfile, updatePassword } = useAuth();\n  const fileInputRef = useRef(null);\n  \n  const [activeTab, setActiveTab] = useState('profile');\n  const [loading, setLoading] = useState(false);\n  const [imagePreview, setImagePreview] = useState(null);\n  \n  const [profileData, setProfileData] = useState({\n    firstname: '',\n    lastname: '',\n    age: '',\n    gender: '',\n  });\n\n  const [passwordData, setPasswordData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n  });\n\n  useEffect(() => {\n    if (userProfile) {\n      setProfileData({\n        firstname: userProfile.firstname || '',\n        lastname: userProfile.lastname || '',\n        age: userProfile.age || '',\n        gender: userProfile.gender || '',\n      });\n    }\n  }, [userProfile]);\n\n  const handleProfileChange = (e) => {\n    setProfileData({ ...profileData, [e.target.name]: e.target.value });\n  };\n\n  const handlePasswordChange = (e) => {\n    setPasswordData({ ...passwordData, [e.target.name]: e.target.value });\n  };\n\n  const handleProfileSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Check if any data changed\n    const hasChanges = \n      profileData.firstname !== userProfile?.firstname ||\n      profileData.lastname !== userProfile?.lastname ||\n      profileData.age !== userProfile?.age ||\n      profileData.gender !== userProfile?.gender;\n    \n    if (!hasChanges) {\n      Swal.fire({\n        icon: 'info',\n        title: 'No Changes',\n        text: 'Nothing was modified',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await updateProfile(profileData);\n    setLoading(false);\n    \n    if (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Update Failed',\n        text: error.message,\n        confirmButtonColor: '#043915',\n      });\n    } else {\n      Swal.fire({\n        icon: 'success',\n        title: 'Success',\n        text: 'Profile updated successfully!',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const handlePasswordSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (passwordData.newPassword !== passwordData.confirmPassword) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Passwords do not match',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    if (passwordData.newPassword.length < 6) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Password must be at least 6 characters',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    if (!passwordData.currentPassword) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Please enter your current password',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await updatePassword(passwordData.currentPassword, passwordData.newPassword);\n    setLoading(false);\n    \n    if (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Update Failed',\n        text: error.message,\n        confirmButtonColor: '#043915',\n      });\n    } else {\n      Swal.fire({\n        icon: 'success',\n        title: 'Success',\n        text: 'Password updated successfully!',\n        confirmButtonColor: '#043915',\n      });\n      setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' });\n    }\n  };\n\n  const handleImageSelect = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('image/')) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Please select an image file',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    if (file.size > 2040 * 1024) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Image must be less than 2MB',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    try {\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const img = new Image();\n          img.onload = async () => {\n            // Compress image\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            \n            const size = 200;\n            canvas.width = size;\n            canvas.height = size;\n            \n            const sourceSize = Math.min(img.width, img.height);\n            const sx = (img.width - sourceSize) / 2;\n            const sy = (img.height - sourceSize) / 2;\n            \n            ctx.drawImage(img, sx, sy, sourceSize, sourceSize, 0, 0, size, size);\n            \n            const compressedBase64 = canvas.toDataURL('image/jpeg', 0.5);\n            setImagePreview(compressedBase64);\n          };\n          img.onerror = () => {\n            Swal.fire({\n              icon: 'error',\n              title: 'Error',\n              text: 'Invalid image file',\n              confirmButtonColor: '#043915',\n            });\n          };\n          img.src = reader.result;\n        } catch (error) {\n          console.error('Compression error:', error);\n          Swal.fire({\n            icon: 'error',\n            title: 'Error',\n            text: 'Failed to process image',\n            confirmButtonColor: '#043915',\n          });\n        }\n      };\n      reader.readAsDataURL(file);\n    } catch (error) {\n      console.error('Upload error:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to upload image',\n        confirmButtonColor: '#043915',\n      });\n    }\n  };\n\n  const handleImageConfirm = async () => {\n    if (!imagePreview) return;\n\n    setLoading(true);\n    const { error } = await updateProfile({ image: imagePreview });\n    setLoading(false);\n\n    if (error) {\n      console.error('Upload error:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Upload Failed',\n        text: 'Failed to upload image',\n        confirmButtonColor: '#043915',\n      });\n    } else {\n      Swal.fire({\n        icon: 'success',\n        title: 'Success',\n        text: 'Profile photo updated!',\n        confirmButtonColor: '#043915',\n      });\n      setImagePreview(null);\n    }\n  };\n\n  const handleImageCancel = () => {\n    setImagePreview(null);\n    fileInputRef.current.value = '';\n  };\n\n  const handleLogout = async () => {\n    await signOut();\n    navigate('/login');\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Profile\" showProfile={false} showBack={true} />\n      \n      <div className=\"px-4 py-4 pb-32\">\n        <div className=\"flex flex-col items-center mb-6\">\n          <div className=\"relative\">\n            <div className=\"w-24 h-24 rounded-full bg-primary overflow-hidden flex items-center justify-center\">\n              {userProfile?.image ? (\n                <img \n                  src={userProfile.image} \n                  alt=\"Profile\" \n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <span className=\"text-white text-2xl font-medium\">\n                  {userProfile?.firstname?.charAt(0) || 'U'}\n                </span>\n              )}\n            </div>\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              className=\"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center border border-gray-100\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\n              </svg>\n            </button>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageSelect}\n              className=\"hidden\"\n            />\n          </div>\n          <h2 className=\"text-heading font-poppins mt-3\">\n            {userProfile?.firstname} {userProfile?.lastname}\n          </h2>\n          <p className=\"text-body text-gray-500\">{userProfile?.email}</p>\n        </div>\n\n        <div className=\"flex gap-2 mb-6\">\n          <button\n            onClick={() => setActiveTab('profile')}\n            className={`flex-1 py-2 rounded-lg text-body font-medium transition-all ${\n              activeTab === 'profile' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-600'\n            }`}\n          >\n            Profile\n          </button>\n          <button\n            onClick={() => setActiveTab('password')}\n            className={`flex-1 py-2 rounded-lg text-body font-medium transition-all ${\n              activeTab === 'password' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-600'\n            }`}\n          >\n            Password\n          </button>\n        </div>\n\n        {imagePreview && (\n          <div className=\"mb-6 p-4 rounded-lg bg-blue-50 border border-blue-200\">\n            <p className=\"text-body text-blue-600 mb-3 font-medium\">Preview your photo:</p>\n            <img \n              src={imagePreview} \n              alt=\"Preview\" \n              className=\"w-24 h-24 rounded-full mx-auto mb-4 object-cover\"\n            />\n            <div className=\"flex gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleImageConfirm}\n                disabled={loading}\n                className=\"flex-1 py-2 rounded-lg bg-primary text-white text-body font-medium\"\n              >\n                {loading ? 'Uploading...' : 'Confirm & Upload'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={handleImageCancel}\n                className=\"flex-1 py-2 rounded-lg bg-gray-100 text-gray-600 text-body font-medium\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'profile' ? (\n          <form onSubmit={handleProfileSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <label className=\"block text-body text-gray-600 mb-1\">First Name</label>\n                <input\n                  type=\"text\"\n                  name=\"firstname\"\n                  value={profileData.firstname}\n                  onChange={handleProfileChange}\n                  className=\"input-field\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-body text-gray-600 mb-1\">Last Name</label>\n                <input\n                  type=\"text\"\n                  name=\"lastname\"\n                  value={profileData.lastname}\n                  onChange={handleProfileChange}\n                  className=\"input-field\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Age</label>\n              <input\n                type=\"number\"\n                name=\"age\"\n                value={profileData.age}\n                onChange={handleProfileChange}\n                className=\"input-field\"\n                placeholder=\"Enter your age\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Gender</label>\n              <select\n                name=\"gender\"\n                value={profileData.gender}\n                onChange={handleProfileChange}\n                className=\"input-field\"\n              >\n                <option value=\"\">Select gender</option>\n                <option value=\"male\">Male</option>\n                <option value=\"female\">Female</option>\n                <option value=\"other\">Other</option>\n                <option value=\"prefer_not_to_say\">Prefer not to say</option>\n              </select>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"btn-primary w-full py-3\"\n            >\n              {loading ? 'Saving...' : 'Save Changes'}\n            </button>\n          </form>\n        ) : (\n          <form onSubmit={handlePasswordSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Current Password</label>\n              <input\n                type=\"password\"\n                name=\"currentPassword\"\n                value={passwordData.currentPassword}\n                onChange={handlePasswordChange}\n                className=\"input-field\"\n                placeholder=\"Enter current password\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">New Password</label>\n              <input\n                type=\"password\"\n                name=\"newPassword\"\n                value={passwordData.newPassword}\n                onChange={handlePasswordChange}\n                className=\"input-field\"\n                placeholder=\"Enter new password\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Confirm New Password</label>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                value={passwordData.confirmPassword}\n                onChange={handlePasswordChange}\n                className=\"input-field\"\n                placeholder=\"Confirm new password\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"btn-primary w-full py-3\"\n            >\n              {loading ? 'Updating...' : 'Update Password'}\n            </button>\n          </form>\n        )}\n\n        <div className=\"mt-8 pt-6 border-t border-gray-100\">\n          <button\n            onClick={handleLogout}\n            className=\"w-full py-3 rounded-lg bg-red-500 text-white text-body font-medium hover:bg-red-600 transition-all\"\n          >\n            Sign Out\n          </button>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Profile;\n","path":null,"size_bytes":14746,"size_tokens":null},"src/pages/Login.js":{"content":"import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const { signIn } = useAuth();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n    setError('');\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!formData.email || !formData.password) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signIn(formData.email, formData.password);\n    setLoading(false);\n\n    if (error) {\n      setError(error.message);\n    } else {\n      navigate('/home');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col px-6 py-8\">\n      <div className=\"flex-1 flex flex-col justify-center max-w-md mx-auto w-full\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-heading font-poppins text-dark mb-2\">Welcome to Daily Rise</h1>\n          <p className=\"text-body text-gray-500\">Sign in to track your habits</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {error && (\n            <div className=\"bg-red-50 text-red-600 text-body p-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-body text-gray-600 mb-1\">Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"input-field\"\n              placeholder=\"Enter your email\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-body text-gray-600 mb-1\">Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"input-field\"\n              placeholder=\"Enter your password\"\n            />\n          </div>\n\n          <div className=\"text-right\">\n            <Link to=\"/forgot-password\" className=\"text-body text-primary hover:underline\">\n              Forgot Password?\n            </Link>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"btn-primary w-full py-3\"\n          >\n            {loading ? 'Signing in...' : 'Sign In'}\n          </button>\n        </form>\n\n        <p className=\"text-center text-body text-gray-500 mt-6\">\n          Don't have an account?{' '}\n          <Link to=\"/register\" className=\"text-primary font-medium hover:underline\">\n            Sign Up\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","path":null,"size_bytes":3394,"size_tokens":null},"src/pages/Progress.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\n\nconst Progress = () => {\n  const { user } = useAuth();\n  const [habits, setHabits] = useState([]);\n  const [logs, setLogs] = useState([]);\n  const [selectedHabit, setSelectedHabit] = useState(null);\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [selectedDay, setSelectedDay] = useState(new Date().getDate());\n  const [weeklyStats, setWeeklyStats] = useState({ completed: 0, missed: 0, total: 0 });\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user, currentMonth]);\n\n  // Refresh data every 3 seconds for dynamic updates\n  useEffect(() => {\n    if (!user) return;\n    \n    const interval = setInterval(() => {\n      fetchData();\n    }, 3000);\n\n    return () => clearInterval(interval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user, currentMonth]);\n\n  const fetchData = async () => {\n    try {\n      const { data: habitsData } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id);\n\n      setHabits(habitsData || []);\n\n      if (habitsData && habitsData.length > 0) {\n        const startOfMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1);\n        const endOfMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0);\n\n        const { data: logsData } = await supabase\n          .from('habit_logs')\n          .select('*')\n          .in('habit_id', habitsData.map(h => h.id))\n          .gte('log_date', startOfMonth.toISOString().split('T')[0])\n          .lte('log_date', endOfMonth.toISOString().split('T')[0]);\n\n        setLogs(logsData || []);\n        calculateWeeklyStats(logsData || [], habitsData);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n\n  const calculateWeeklyStats = (logsData, habitsData) => {\n    const today = new Date();\n    const startOfWeek = new Date(today);\n    startOfWeek.setDate(today.getDate() - today.getDay());\n    \n    const weekLogs = logsData.filter(log => {\n      const logDate = new Date(log.log_date);\n      return logDate >= startOfWeek && logDate <= today;\n    });\n\n    const completed = weekLogs.filter(l => l.status === 'done').length;\n    const missed = weekLogs.filter(l => l.status === 'missed').length;\n    const daysInWeek = today.getDay() + 1;\n    const total = habitsData.length * daysInWeek;\n\n    setWeeklyStats({ completed, missed, total });\n  };\n\n  const getDaysInMonth = () => {\n    const year = currentMonth.getFullYear();\n    const month = currentMonth.getMonth();\n    const days = new Date(year, month + 1, 0).getDate();\n    const firstDay = new Date(year, month, 1).getDay();\n    \n    const daysArray = [];\n    for (let i = 0; i < firstDay; i++) {\n      daysArray.push(null);\n    }\n    for (let i = 1; i <= days; i++) {\n      daysArray.push(i);\n    }\n    return daysArray;\n  };\n\n  const getLogForDay = (day) => {\n    if (!day) return null;\n    const dateStr = `${currentMonth.getFullYear()}-${String(currentMonth.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\n    \n    if (selectedHabit) {\n      return logs.find(l => l.habit_id === selectedHabit && l.log_date === dateStr);\n    }\n    \n    const dayLogs = logs.filter(l => l.log_date === dateStr);\n    const done = dayLogs.filter(l => l.status === 'done').length;\n    const missed = dayLogs.filter(l => l.status === 'missed').length;\n    \n    if (done > missed) return { status: 'done' };\n    if (missed > done) return { status: 'missed' };\n    if (dayLogs.length > 0) return { status: 'partial' };\n    return null;\n  };\n\n  const getDayStatusColor = (log) => {\n    if (!log) return 'bg-gray-100';\n    switch (log.status) {\n      case 'done': return 'bg-primary';\n      case 'missed': return 'bg-red-400';\n      case 'partial': return 'bg-yellow-400';\n      default: return 'bg-gray-100';\n    }\n  };\n\n  const changeMonth = (delta) => {\n    const newMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + delta, 1);\n    setCurrentMonth(newMonth);\n    setSelectedDay(new Date().getDate());\n  };\n\n  const calculateStreak = () => {\n    const today = new Date();\n    let streak = 0;\n    let currentDate = new Date(today);\n\n    while (true) {\n      const dateStr = currentDate.toISOString().split('T')[0];\n      const dayLogs = logs.filter(l => l.log_date === dateStr && l.status === 'done');\n      \n      if (dayLogs.length === 0 && currentDate < today) break;\n      if (dayLogs.length > 0) streak++;\n      \n      currentDate.setDate(currentDate.getDate() - 1);\n      if (streak > 365) break;\n    }\n\n    return streak;\n  };\n\n  const successRate = weeklyStats.total > 0 \n    ? Math.round((weeklyStats.completed / weeklyStats.total) * 100) \n    : 0;\n\n  const getSelectedDayHabitsStatus = React.useMemo(() => {\n    const year = currentMonth.getFullYear();\n    const month = String(currentMonth.getMonth() + 1).padStart(2, '0');\n    const day = String(selectedDay).padStart(2, '0');\n    const dateStr = `${year}-${month}-${day}`;\n    \n    console.log('Calculating for date:', dateStr);\n    \n    const done = [];\n    const missed = [];\n    const notLogged = [];\n\n    habits.forEach(habit => {\n      const log = logs.find(l => l.habit_id === habit.id && l.log_date === dateStr);\n      console.log(`Habit ${habit.name}: log status = ${log?.status}`);\n      if (log?.status === 'done') {\n        done.push(habit);\n      } else if (log?.status === 'missed') {\n        missed.push(habit);\n      } else {\n        notLogged.push(habit);\n      }\n    });\n\n    console.log('Done:', done.length, 'Missed:', missed.length, 'NotLogged:', notLogged.length);\n    return { done, missed, notLogged };\n  }, [currentMonth, selectedDay, habits, logs]);\n\n  const { done: doneHabits, missed: missedHabits, notLogged: notLoggedHabits } = getSelectedDayHabitsStatus;\n\n  const getFormattedSelectedDate = () => {\n    const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), selectedDay);\n    return date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Progress\" />\n      \n      <div className=\"px-4 py-4 pb-24\">\n        <div className=\"grid grid-cols-3 gap-3 mb-6\">\n          <div className=\"card text-center\">\n            <p className=\"text-heading text-primary font-bold\">{calculateStreak()}</p>\n            <p className=\"text-small text-gray-500\">Day Streak</p>\n          </div>\n          <div className=\"card text-center\">\n            <p className=\"text-heading text-primary font-bold\">{successRate}%</p>\n            <p className=\"text-small text-gray-500\">Success Rate</p>\n          </div>\n          <div className=\"card text-center\">\n            <p className=\"text-heading text-primary font-bold\">{weeklyStats.completed}</p>\n            <p className=\"text-small text-gray-500\">This Week</p>\n          </div>\n        </div>\n\n        <div className=\"card mb-6\">\n          <h3 className=\"text-subheading font-poppins mb-4\">Weekly Summary</h3>\n          <div className=\"space-y-4\">\n            {weeklyStats.completed === 0 && weeklyStats.missed === 0 ? (\n              <p className=\"text-body text-gray-500 text-center py-3\">No data</p>\n            ) : (\n              <>\n                {weeklyStats.completed > 0 || weeklyStats.missed > 0 ? (\n                  <>\n                    <div>\n                      <div className=\"flex items-center justify-between mb-1.5\">\n                        <span className=\"text-body text-gray-600\">Completed</span>\n                        <span className=\"text-body font-medium text-primary\">\n                          {weeklyStats.completed === 0 && weeklyStats.missed === 0 \n                            ? 'No data' \n                            : `${Math.round((weeklyStats.completed / (weeklyStats.completed + weeklyStats.missed)) * 100)}%`}\n                        </span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                        <div \n                          className=\"bg-primary h-3 rounded-full transition-all duration-300\"\n                          style={{ width: weeklyStats.completed === 0 && weeklyStats.missed === 0 ? '0%' : `${Math.round((weeklyStats.completed / (weeklyStats.completed + weeklyStats.missed)) * 100)}%` }}\n                        ></div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div className=\"flex items-center justify-between mb-1.5\">\n                        <span className=\"text-body text-gray-600\">Missed</span>\n                        <span className=\"text-body font-medium text-orange-500\">\n                          {weeklyStats.completed === 0 && weeklyStats.missed === 0 \n                            ? 'No data' \n                            : `${Math.round((weeklyStats.missed / (weeklyStats.completed + weeklyStats.missed)) * 100)}%`}\n                        </span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                        <div \n                          className=\"bg-orange-500 h-3 rounded-full transition-all duration-300\"\n                          style={{ width: weeklyStats.completed === 0 && weeklyStats.missed === 0 ? '0%' : `${Math.round((weeklyStats.missed / (weeklyStats.completed + weeklyStats.missed)) * 100)}%` }}\n                        ></div>\n                      </div>\n                    </div>\n                  </>\n                ) : (\n                  <div>\n                    <div className=\"flex items-center justify-between mb-1.5\">\n                      <span className=\"text-body text-gray-600\">Data</span>\n                      <span className=\"text-body font-medium text-gray-400\">No data</span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                      <div className=\"bg-gray-300 h-3 rounded-full\"></div>\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n\n        {weeklyStats.completed > 0 && (\n          <div className=\"card mb-6\">\n            <h3 className=\"text-body font-poppins mb-3 text-primary\">‚úì Completed This Week - {weeklyStats.completed}</h3>\n            <div className=\"space-y-2\">\n              {logs\n                .filter(log => {\n                  const today = new Date();\n                  const startOfWeek = new Date(today);\n                  startOfWeek.setDate(today.getDate() - today.getDay());\n                  const logDate = new Date(log.log_date);\n                  return log.status === 'done' && logDate >= startOfWeek && logDate <= today;\n                })\n                .sort((a, b) => new Date(b.log_date) - new Date(a.log_date))\n                .map((log, idx) => {\n                  const habit = habits.find(h => h.id === log.habit_id);\n                  return (\n                    <div key={`${log.id}-${idx}`} className=\"flex items-center gap-2 p-2 bg-green-50 rounded-lg\">\n                      <span className=\"text-lg text-primary\">‚úì</span>\n                      <div className=\"flex-1\">\n                        <p className=\"text-body text-gray-700\">{habit?.name}</p>\n                        <p className=\"text-xs text-gray-500\">{new Date(log.log_date).toLocaleDateString()}</p>\n                      </div>\n                    </div>\n                  );\n                })}\n            </div>\n          </div>\n        )}\n\n        {weeklyStats.missed > 0 && (\n          <div className=\"card mb-6\">\n            <h3 className=\"text-body font-poppins mb-3 text-red-500\">‚úó Missed This Week - {weeklyStats.missed}</h3>\n            <div className=\"space-y-2\">\n              {logs\n                .filter(log => {\n                  const today = new Date();\n                  const startOfWeek = new Date(today);\n                  startOfWeek.setDate(today.getDate() - today.getDay());\n                  const logDate = new Date(log.log_date);\n                  return log.status === 'missed' && logDate >= startOfWeek && logDate <= today;\n                })\n                .sort((a, b) => new Date(b.log_date) - new Date(a.log_date))\n                .map((log, idx) => {\n                  const habit = habits.find(h => h.id === log.habit_id);\n                  return (\n                    <div key={`${log.id}-${idx}`} className=\"flex items-center gap-2 p-2 bg-red-50 rounded-lg\">\n                      <span className=\"text-lg text-red-500\">‚úó</span>\n                      <div className=\"flex-1\">\n                        <p className=\"text-body text-gray-700\">{habit?.name}</p>\n                        <p className=\"text-xs text-gray-500\">{new Date(log.log_date).toLocaleDateString()}</p>\n                      </div>\n                    </div>\n                  );\n                })}\n            </div>\n          </div>\n        )}\n\n        <div className=\"card mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <button onClick={() => changeMonth(-1)} className=\"p-2 text-gray-400 hover:text-gray-600\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <h3 className=\"text-subheading font-poppins\">\n              {currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n            </h3>\n            <button onClick={() => changeMonth(1)} className=\"p-2 text-gray-400 hover:text-gray-600\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </button>\n          </div>\n\n          <div className=\"mb-4 overflow-x-auto hide-scrollbar\">\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setSelectedHabit(null)}\n                className={`px-3 py-1.5 rounded-full text-small whitespace-nowrap transition-all ${\n                  !selectedHabit ? 'bg-primary text-white' : 'bg-gray-100 text-gray-600'\n                }`}\n              >\n                All Habits\n              </button>\n              {habits.map((habit) => (\n                <button\n                  key={habit.id}\n                  onClick={() => setSelectedHabit(habit.id)}\n                  className={`px-3 py-1.5 rounded-full text-small whitespace-nowrap transition-all ${\n                    selectedHabit === habit.id ? 'bg-primary text-white' : 'bg-gray-100 text-gray-600'\n                  }`}\n                >\n                  {habit.name}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-7 gap-1 text-center mb-2\">\n            {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((day, i) => (\n              <div key={i} className=\"text-small text-gray-400 py-1\">{day}</div>\n            ))}\n          </div>\n\n          <div className=\"grid grid-cols-7 gap-1\">\n            {getDaysInMonth().map((day, idx) => {\n              if (!day) {\n                return <div key={`empty-${idx}`} className=\"bg-transparent\"></div>;\n              }\n              \n              const log = getLogForDay(day);\n              const isToday = new Date().getDate() === day && \n                new Date().getMonth() === currentMonth.getMonth() &&\n                new Date().getFullYear() === currentMonth.getFullYear();\n              const isSelected = day === selectedDay;\n              \n              return (\n                <button\n                  key={`day-${day}`}\n                  onClick={() => setSelectedDay(day)}\n                  className={`aspect-square rounded-lg flex items-center justify-center text-small font-medium transition-all ${\n                    getDayStatusColor(log)\n                  } ${isToday ? 'ring-2 ring-primary ring-offset-2' : ''} ${\n                    isSelected ? 'ring-2 ring-dark ring-offset-2' : ''\n                  } ${\n                    log?.status === 'done' ? 'text-white' : 'text-gray-600'\n                  } cursor-pointer hover:opacity-80`}\n                >\n                  {day}\n                </button>\n              );\n            })}\n          </div>\n\n          <div className=\"flex items-center justify-center gap-4 mt-4 pt-4 border-t border-gray-100\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 rounded bg-primary\"></div>\n              <span className=\"text-small text-gray-500\">Done</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 rounded bg-red-400\"></div>\n              <span className=\"text-small text-gray-500\">Missed</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 rounded bg-gray-100\"></div>\n              <span className=\"text-small text-gray-500\">No data</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Progress;\n","path":null,"size_bytes":17565,"size_tokens":null},"src/components/ViewChallengeModal.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\n\nconst ViewChallengeModal = ({ isOpen, challengeId, onClose }) => {\n  const [challenge, setChallenge] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (isOpen && challengeId) {\n      fetchChallenge();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, challengeId]);\n\n  const fetchChallenge = async () => {\n    try {\n      console.log('üìä Fetching challenge:', challengeId);\n      const { data: challengeData, error } = await supabase\n        .from('challenges')\n        .select(`\n          id,\n          status,\n          created_at,\n          completed_at,\n          challenger_id,\n          challenged_user_id,\n          habit_id,\n          community_id,\n          habits (name),\n          challenger:users!challenger_id (firstname, lastname, image, age, gender),\n          challengee:users!challenged_user_id (firstname, lastname, image, age, gender)\n        `)\n        .eq('id', challengeId)\n        .single();\n\n      if (error) {\n        console.error('üî¥ Query error:', error);\n      } else {\n        console.log('‚úÖ Challenge fetched:', challengeData);\n        setChallenge(challengeData);\n      }\n    } catch (error) {\n      console.error('Error fetching challenge:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n  if (loading) return null;\n  if (!challenge) return null;\n\n  const challengerName = `${challenge.challenger?.firstname || 'User'} ${challenge.challenger?.lastname || ''}`;\n  const challengedName = `${challenge.challengee?.firstname || 'User'} ${challenge.challengee?.lastname || ''}`;\n  const habitName = challenge.habits?.[0]?.name || challenge.habits?.name || 'Unknown Habit';\n  const isCompleted = challenge.status === 'completed' || challenge.status === 'accepted';\n  const challengerImage = challenge.challenger?.image;\n  const challengedImage = challenge.challengee?.image;\n  const challengerAge = challenge.challenger?.age || 'N/A';\n  const challengedAge = challenge.challengee?.age || 'N/A';\n  const challengerGender = challenge.challenger?.gender || 'N/A';\n  const challengedGender = challenge.challengee?.gender || 'N/A';\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-3 sm:p-4\">\n      <div className=\"bg-light rounded-2xl w-full max-w-sm sm:max-w-md lg:max-w-2xl overflow-hidden shadow-2xl max-h-[90vh] overflow-y-auto\">\n        {/* Premium Header */}\n        <div className=\"relative h-24 sm:h-28 lg:h-32 bg-gradient-to-br from-primary via-primary-dark to-primary-dark overflow-hidden\">\n          {/* Decorative Elements */}\n          <div className=\"absolute top-0 right-0 w-32 h-32 sm:w-40 sm:h-40 bg-primary/10 rounded-full blur-3xl -mr-16 sm:-mr-20 -mt-16 sm:-mt-20\"></div>\n          <div className=\"absolute bottom-0 left-0 w-24 h-24 sm:w-32 sm:h-32 bg-primary/5 rounded-full blur-3xl -ml-12 sm:-ml-16 -mb-12 sm:-mb-16\"></div>\n          \n          {/* Close Button */}\n          <button\n            onClick={onClose}\n            className=\"absolute top-3 sm:top-4 right-3 sm:right-4 bg-light/20 hover:bg-light/30 text-light p-1.5 sm:p-2 rounded-full transition-all text-lg sm:text-xl\"\n          >\n            ‚úï\n          </button>\n\n          <div className=\"relative h-full flex flex-col justify-center items-center px-4 sm:px-8\">\n            <p className=\"text-small text-light/60 font-poppins uppercase tracking-wider mb-1\">Accountability Challenge</p>\n            <h3 className=\"text-heading sm:text-subheading lg:text-heading font-poppins font-bold text-light text-center\" style={{fontSize: '18px', fontWeight: '700'}}>‚ö° Challenge Battle</h3>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n          {/* Status Section */}\n          <div className=\"mb-6 flex justify-center\">\n            {isCompleted ? (\n              <div className=\"inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 bg-primary/10 border border-primary/30 rounded-full\">\n                <span className=\"text-base sm:text-lg\">‚úÖ</span>\n                <p className=\"text-small sm:text-body font-poppins font-medium text-primary\">Challenge Accepted</p>\n              </div>\n            ) : (\n              <div className=\"inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 bg-primary/5 border border-primary/20 rounded-full\">\n                <span className=\"text-base sm:text-lg\">‚è≥</span>\n                <p className=\"text-small sm:text-body font-poppins font-medium text-primary\">Awaiting Response</p>\n              </div>\n            )}\n          </div>\n\n          {/* User Cards - Responsive Grid (Always 2 Columns) */}\n          <div className=\"grid grid-cols-2 gap-2 sm:gap-3 lg:gap-6 mb-6 sm:mb-8 lg:mb-10\">\n            {/* Challenger Card */}\n            <div className=\"group\">\n              <div className=\"bg-primary/5 border border-primary/15 rounded-lg sm:rounded-xl lg:rounded-2xl p-3 sm:p-4 lg:p-6 hover:shadow-lg hover:border-primary/30 transition-all duration-300\">\n                <div className=\"flex flex-col items-center\">\n                  {/* Profile Image */}\n                  <div className=\"relative mb-2 sm:mb-3 lg:mb-5\">\n                    <div className=\"absolute inset-0 rounded-full bg-primary/15 blur-lg opacity-25 group-hover:opacity-40 transition-opacity\"></div>\n                    <img\n                      src={challengerImage || 'https://via.placeholder.com/100?text=User'}\n                      alt={challengerName}\n                      className=\"relative w-16 sm:w-20 lg:w-28 h-16 sm:h-20 lg:h-28 rounded-full border-4 border-light shadow-lg object-cover\"\n                    />\n                  </div>\n\n                  {/* Info */}\n                  <h4 className=\"text-small sm:text-body lg:text-heading font-poppins font-semibold text-dark text-center mb-1 sm:mb-2 line-clamp-2\">{challengerName}</h4>\n                  <div className=\"flex items-center gap-0.5 sm:gap-1 text-small lg:text-body text-gray-600 mb-2 sm:mb-3 text-center font-roboto\">\n                    <span>üë§</span>\n                    <span className=\"line-clamp-1\">{challengerGender}</span>\n                    <span>‚Ä¢</span>\n                    <span>{challengerAge}y</span>\n                  </div>\n\n                  {/* Badge */}\n                  <span className=\"inline-flex items-center gap-0.5 sm:gap-1 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 bg-primary/20 text-primary text-small lg:text-body font-poppins font-bold rounded-full whitespace-nowrap\">\n                    üéñÔ∏è Challenger\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Challenged User Card */}\n            <div className=\"group\">\n              <div className=\"bg-primary/5 border border-primary/15 rounded-lg sm:rounded-xl lg:rounded-2xl p-3 sm:p-4 lg:p-6 hover:shadow-lg hover:border-primary/30 transition-all duration-300\">\n                <div className=\"flex flex-col items-center\">\n                  {/* Profile Image */}\n                  <div className=\"relative mb-2 sm:mb-3 lg:mb-5\">\n                    <div className=\"absolute inset-0 rounded-full bg-primary/15 blur-lg opacity-25 group-hover:opacity-40 transition-opacity\"></div>\n                    <img\n                      src={challengedImage || 'https://via.placeholder.com/100?text=User'}\n                      alt={challengedName}\n                      className=\"relative w-16 sm:w-20 lg:w-28 h-16 sm:h-20 lg:h-28 rounded-full border-4 border-light shadow-lg object-cover\"\n                    />\n                  </div>\n\n                  {/* Info */}\n                  <h4 className=\"text-small sm:text-body lg:text-heading font-poppins font-semibold text-dark text-center mb-1 sm:mb-2 line-clamp-2\">{challengedName}</h4>\n                  <div className=\"flex items-center gap-0.5 sm:gap-1 text-small lg:text-body text-gray-600 mb-2 sm:mb-3 text-center font-roboto\">\n                    <span>üë§</span>\n                    <span className=\"line-clamp-1\">{challengedGender}</span>\n                    <span>‚Ä¢</span>\n                    <span>{challengedAge}y</span>\n                  </div>\n\n                  {/* Badge */}\n                  <span className=\"inline-flex items-center gap-0.5 sm:gap-1 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 bg-primary/20 text-primary text-small lg:text-body font-poppins font-bold rounded-full whitespace-nowrap\">\n                    üèÖ Challenged\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* VS Divider */}\n          <div className=\"flex items-center gap-2 sm:gap-3 lg:gap-4 mb-6 sm:mb-8 lg:mb-10\">\n            <div className=\"flex-1 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent\"></div>\n            <div className=\"px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 bg-gray-100 rounded-full border border-gray-200\">\n              <p className=\"text-small sm:text-body font-poppins font-bold text-gray-600\">VS</p>\n            </div>\n            <div className=\"flex-1 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent\"></div>\n          </div>\n\n          {/* Habit Challenge */}\n          <div className=\"mb-4 sm:mb-6 lg:mb-8 p-3 sm:p-4 lg:p-6 bg-primary/5 border border-primary/15 rounded-lg sm:rounded-xl lg:rounded-2xl\">\n            <p className=\"text-small font-poppins font-bold text-gray-600 uppercase tracking-wider mb-2 sm:mb-3 text-center\">Challenge Objective</p>\n            <div className=\"bg-light border border-primary/10 rounded-lg px-3 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-5 text-center\">\n              <p className=\"text-body sm:text-subheading lg:text-heading font-poppins font-bold text-primary mb-1 sm:mb-2 break-words\">\"{habitName}\"</p>\n              <p className=\"text-small lg:text-body font-roboto text-gray-700 leading-relaxed\">\n                Complete this habit together! When either user completes it, both earn rewards! üéØ\n              </p>\n            </div>\n          </div>\n\n          {/* Rewards Info */}\n          <div className=\"mb-4 sm:mb-6 lg:mb-8 p-3 sm:p-4 lg:p-6 bg-primary/5 border border-primary/15 rounded-lg sm:rounded-xl lg:rounded-2xl\">\n            <div className=\"flex items-start gap-2 sm:gap-3 lg:gap-4\">\n              <div className=\"text-2xl sm:text-3xl lg:text-4xl flex-shrink-0\">‚ú®</div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-small sm:text-body lg:text-subheading font-poppins font-bold text-dark mb-1\">+10 Points Reward</p>\n                <p className=\"text-small lg:text-body font-roboto text-gray-700 leading-relaxed\">\n                  Both earn <span className=\"font-semibold\">10 points</span> to unlock badges! üèÜ\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Challenge Timeline */}\n          <div className=\"mb-4 sm:mb-6 lg:mb-8 space-y-2\">\n            <p className=\"text-small font-poppins font-bold text-gray-600 uppercase tracking-wider\">Timeline</p>\n            <div className=\"space-y-1.5\">\n              <div className=\"flex items-center gap-2 text-small lg:text-body text-gray-700 font-roboto\">\n                <div className=\"w-2 h-2 rounded-full bg-primary flex-shrink-0\"></div>\n                <span className=\"truncate\">Created: {new Date(challenge.created_at).toLocaleDateString()}</span>\n              </div>\n              {challenge.completed_at && (\n                <div className=\"flex items-center gap-2 text-small lg:text-body text-gray-700 font-roboto\">\n                  <div className=\"w-2 h-2 rounded-full bg-primary flex-shrink-0\"></div>\n                  <span className=\"truncate\">Completed: {new Date(challenge.completed_at).toLocaleDateString()}</span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Action Button */}\n          <button\n            onClick={onClose}\n            className=\"w-full px-3 sm:px-4 lg:px-6 py-3 sm:py-4 bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary-dark text-light rounded-lg sm:rounded-xl font-poppins font-bold text-small sm:text-body transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform\"\n          >\n            Got It! Let's Go üí™\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ViewChallengeModal;\n","path":null,"size_bytes":12545,"size_tokens":null},"src/pages/Rewards.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\nimport Swal from 'sweetalert2';\n\nconst Rewards = () => {\n  const { user } = useAuth();\n  const [userPoints, setUserPoints] = useState(0);\n  const [claimedRewards, setClaimedRewards] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [habits, setHabits] = useState([]);\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n      // Listen for storage changes to update points in real-time\n      const handleStorageChange = (e) => {\n        if (e.key === `user_points_${user.id}` && e.newValue) {\n          setUserPoints(parseInt(e.newValue));\n        }\n      };\n      window.addEventListener('storage', handleStorageChange);\n      return () => window.removeEventListener('storage', handleStorageChange);\n    }\n  }, [user]);\n\n  const fetchData = async () => {\n    try {\n      const { data: habitsData } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id);\n\n      setHabits(habitsData || []);\n\n      // Get points from localStorage (earned via reminders)\n      const savedPoints = localStorage.getItem(`user_points_${user.id}`);\n      setUserPoints(savedPoints ? parseInt(savedPoints) : 0);\n\n      const claimed = localStorage.getItem(`rewards_${user.id}`);\n      setClaimedRewards(claimed ? JSON.parse(claimed) : []);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const rewards = [\n    { id: 'bronze', name: 'Bronze Badge', points: 1000, icon: 'ü•â', color: 'bg-amber-100' },\n    { id: 'silver', name: 'Silver Badge', points: 3000, icon: 'ü•à', color: 'bg-gray-100' },\n    { id: 'gold', name: 'Gold Badge', points: 5000, icon: 'ü•á', color: 'bg-yellow-100' },\n    { id: 'diamond', name: 'Diamond Badge', points: 10000, icon: 'üíé', color: 'bg-blue-100' },\n    { id: 'tshirt', name: 'Signature T-Shirt', points: 2000, icon: 'üëï', color: 'bg-red-100' },\n    { id: 'hoodie', name: 'Premium Hoodie', points: 5000, icon: 'üß•', color: 'bg-indigo-100' },\n    { id: 'trophy', name: 'Trophy', points: 7500, icon: 'üèÜ', color: 'bg-orange-100' },\n  ];\n\n  const claimReward = (reward) => {\n    if (userPoints < reward.points) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Not Enough Points',\n        text: `You need ${reward.points} points (you have ${userPoints})`,\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    if (claimedRewards.includes(reward.id)) {\n      Swal.fire({\n        icon: 'info',\n        title: 'Already Claimed',\n        text: 'You have already claimed this reward',\n        confirmButtonColor: '#043915',\n      });\n      return;\n    }\n\n    const newClaimed = [...claimedRewards, reward.id];\n    setClaimedRewards(newClaimed);\n    localStorage.setItem(`rewards_${user.id}`, JSON.stringify(newClaimed));\n\n    Swal.fire({\n      icon: 'success',\n      title: 'Reward Claimed!',\n      text: `You claimed ${reward.name}!`,\n      timer: 2000,\n      confirmButtonColor: '#043915',\n    });\n  };\n\n  const canClaim = (reward) => {\n    return userPoints >= reward.points && !claimedRewards.includes(reward.id);\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Rewards\" />\n\n      <div className=\"px-4 py-4 pb-32\">\n        <div className=\"card mb-6 bg-gradient-to-r from-primary to-primary/80\">\n          <div className=\"text-white\">\n            <p className=\"text-body\">Your Points</p>\n            <p className=\"text-5xl font-bold my-2\">{userPoints}</p>\n            <p className=\"text-xs opacity-90\">Complete habits to earn more points (+10 per habit)</p>\n          </div>\n        </div>\n\n        <h3 className=\"text-subheading font-poppins text-dark mb-4\">Available Rewards</h3>\n        \n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 gap-3\">\n            {rewards.map((reward) => {\n              const claimed = claimedRewards.includes(reward.id);\n              const canClaimReward = canClaim(reward);\n\n              return (\n                <div\n                  key={reward.id}\n                  className={`card p-4 ${reward.color} border-2 ${\n                    claimed ? 'border-green-300' : 'border-transparent'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-3xl\">{reward.icon}</span>\n                      <div>\n                        <p className=\"text-body font-medium text-dark\">{reward.name}</p>\n                        <p className=\"text-xs text-gray-500\">{reward.points} points</p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => claimReward(reward)}\n                      disabled={!canClaimReward}\n                      className={`px-3 py-2 rounded-lg text-body font-medium transition-colors ${\n                        claimed\n                          ? 'bg-green-100 text-green-600 cursor-default'\n                          : canClaimReward\n                          ? 'bg-primary text-white hover:bg-primary/90'\n                          : 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                      }`}\n                    >\n                      {claimed ? '‚úì Claimed' : 'Claim'}\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {claimedRewards.length > 0 && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-subheading font-poppins text-dark mb-4\">Your Rewards ({claimedRewards.length})</h3>\n            <div className=\"bg-green-50 rounded-lg p-4 border border-green-200\">\n              <p className=\"text-body text-green-800\">Great job! You've claimed {claimedRewards.length} reward{claimedRewards.length !== 1 ? 's' : ''}.</p>\n              <p className=\"text-xs text-green-600 mt-2\">Keep completing habits to unlock more rewards!</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n};\n\nexport default Rewards;\n","path":null,"size_bytes":6488,"size_tokens":null},"src/lib/supabaseClient.js":{"content":"import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('Missing Supabase environment variables')\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n","path":null,"size_bytes":342,"size_tokens":null},"src/components/SelectHabitModal.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\n\nconst SelectHabitModal = ({ onClose, onSelect }) => {\n  const { user } = useAuth();\n  const [habits, setHabits] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchHabits();\n  }, []);\n\n  const fetchHabits = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setHabits(data || []);\n    } catch (error) {\n      console.error('Error fetching habits:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSelectHabit = (habit) => {\n    onSelect(habit);\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white w-full max-w-sm rounded-2xl overflow-hidden flex flex-col max-h-[85vh] shadow-2xl\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-6 py-5 border-b border-gray-100 flex-shrink-0 bg-gradient-to-r from-white to-gray-50\">\n          <div>\n            <h2 className=\"text-heading font-poppins text-dark\">Select Habit</h2>\n            <p className=\"text-xs text-gray-500 mt-1\">Choose a habit to track today</p>\n          </div>\n          <button \n            type=\"button\" \n            onClick={onClose} \n            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto px-6 py-4\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-16\">\n              <div className=\"w-8 h-8 border-3 border-primary/20 border-t-primary rounded-full animate-spin\"></div>\n            </div>\n          ) : habits.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                </svg>\n              </div>\n              <p className=\"text-body font-medium text-gray-600 mb-1\">No habits yet</p>\n              <p className=\"text-xs text-gray-500\">Create your first habit to get started</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {habits.map((habit, index) => (\n                <button\n                  key={habit.id}\n                  type=\"button\"\n                  onClick={() => handleSelectHabit(habit)}\n                  className=\"w-full p-4 rounded-xl border border-gray-200 text-left hover:border-primary hover:bg-primary/5 transition-all active:bg-primary/10 group\"\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-body font-semibold text-dark group-hover:text-primary transition-colors\">{habit.name}</h3>\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        <span className=\"inline-block px-2 py-1 bg-gray-100 rounded mr-2\">{habit.category}</span>\n                        <span className=\"inline-block px-2 py-1 bg-gray-100 rounded\">{habit.frequency}</span>\n                      </p>\n                    </div>\n                    <div className=\"ml-3 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <div className=\"w-6 h-6 rounded-full bg-primary flex items-center justify-center\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex-shrink-0 bg-gray-50 border-t border-gray-100 px-6 py-4 space-y-2\">\n          <button \n            type=\"button\"\n            onClick={onClose}\n            className=\"w-full py-2 rounded-lg bg-white border border-gray-200 text-gray-600 text-body font-medium hover:bg-gray-50 transition-all\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SelectHabitModal;\n","path":null,"size_bytes":5219,"size_tokens":null},"src/pages/Notifications.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../lib/supabaseClient';\nimport Layout from '../components/Layout';\nimport Header from '../components/Header';\n\nconst alarmSounds = [\n  { id: 'beep', name: 'üîî Classic Beep', frequency: 800 },\n  { id: 'bell', name: 'üéµ Sweet Bell', frequency: 1000 },\n  { id: 'chime', name: '‚ú® Gentle Chime', frequency: 600 },\n  { id: 'alarm', name: 'üîä Loud Alarm', frequency: 1200 },\n  { id: 'tone', name: 'üì¢ Rising Tone', frequency: 700 },\n];\n\nconst Notifications = () => {\n  const { user } = useAuth();\n  const [habits, setHabits] = useState([]);\n  const [reminders, setReminders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [selectedHabit, setSelectedHabit] = useState('');\n  const [reminderTime, setReminderTime] = useState('09:00');\n  const [selectedAlarm, setSelectedAlarm] = useState('beep');\n  const [notificationPermission, setNotificationPermission] = useState('default');\n  const [isAlarmRinging, setIsAlarmRinging] = useState(false);\n  const [alarmCountdown, setAlarmCountdown] = useState(0);\n  const [currentAlarmReminder, setCurrentAlarmReminder] = useState(null);\n  const [alarmIntervalId, setAlarmIntervalId] = useState(null);\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n    checkNotificationPermission();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n\n  const checkNotificationPermission = () => {\n    if ('Notification' in window) {\n      setNotificationPermission(Notification.permission);\n    }\n  };\n\n  const requestNotificationPermission = async () => {\n    if ('Notification' in window) {\n      const permission = await Notification.requestPermission();\n      setNotificationPermission(permission);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const { data: habitsData } = await supabase\n        .from('habits')\n        .select('*')\n        .eq('user_id', user.id);\n\n      setHabits(habitsData || []);\n\n      const storedReminders = localStorage.getItem(`reminders_${user.id}`);\n      if (storedReminders) {\n        setReminders(JSON.parse(storedReminders));\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addReminder = () => {\n    if (!selectedHabit || !reminderTime) return;\n\n    const habit = habits.find(h => h.id === parseInt(selectedHabit));\n    const newReminder = {\n      id: Date.now(),\n      habitId: parseInt(selectedHabit),\n      habitName: habit?.name || 'Unknown',\n      time: reminderTime,\n      alarmSound: selectedAlarm,\n      enabled: true,\n    };\n\n    const updatedReminders = [...reminders, newReminder];\n    setReminders(updatedReminders);\n    localStorage.setItem(`reminders_${user.id}`, JSON.stringify(updatedReminders));\n    \n    setShowAddModal(false);\n    setSelectedHabit('');\n    setReminderTime('09:00');\n    setSelectedAlarm('beep');\n\n    scheduleNotification(newReminder);\n  };\n\n  useEffect(() => {\n    if (reminders.length > 0) {\n      reminders.forEach(reminder => {\n        if (reminder.enabled) {\n          scheduleNotification(reminder);\n        }\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [notificationPermission]);\n\n  const toggleReminder = (reminderId) => {\n    const updatedReminders = reminders.map(r => \n      r.id === reminderId ? { ...r, enabled: !r.enabled } : r\n    );\n    setReminders(updatedReminders);\n    localStorage.setItem(`reminders_${user.id}`, JSON.stringify(updatedReminders));\n  };\n\n  const deleteReminder = (reminderId) => {\n    const updatedReminders = reminders.filter(r => r.id !== reminderId);\n    setReminders(updatedReminders);\n    localStorage.setItem(`reminders_${user.id}`, JSON.stringify(updatedReminders));\n  };\n\n  const playAlarmSound = (alarmType = 'beep', duration = 0.5) => {\n    try {\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      \n      // Resume audio context if it's suspended\n      if (audioContext.state === 'suspended') {\n        audioContext.resume();\n      }\n      \n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      \n      const alarm = alarmSounds.find(a => a.id === alarmType) || alarmSounds[0];\n      oscillator.frequency.value = alarm.frequency;\n      oscillator.type = 'sine';\n      \n      // Higher volume for alarm\n      gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);\n      \n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + duration);\n    } catch (error) {\n      console.warn('Audio context error:', error);\n    }\n  };\n\n  const playPreview = (alarmType) => {\n    playAlarmSound(alarmType, 1);\n  };\n\n  const stopAlarm = async () => {\n    // Add 10 points when user clicks STOP button\n    if (user && currentAlarmReminder) {\n      const currentPoints = parseInt(localStorage.getItem(`user_points_${user.id}`) || '0');\n      const newPoints = currentPoints + 10;\n      localStorage.setItem(`user_points_${user.id}`, newPoints.toString());\n      \n      // Dispatch storage event for real-time updates in Rewards page\n      window.dispatchEvent(new StorageEvent('storage', {\n        key: `user_points_${user.id}`,\n        newValue: newPoints.toString(),\n      }));\n\n      // Check if this habit is part of an active challenge and mark user as winner\n      try {\n        const { data: challenges } = await supabase\n          .from('challenges')\n          .select('id, challenger_id, challenged_user_id')\n          .eq('habit_id', currentAlarmReminder.habitId)\n          .eq('status', 'completed')\n          .is('winner_id', null)\n          .maybeSingle();\n\n        if (challenges) {\n          // Mark current user as winner\n          await supabase\n            .from('challenges')\n            .update({ winner_id: user.id })\n            .eq('id', challenges.id);\n        }\n      } catch (error) {\n        console.error('Error checking for challenges:', error);\n      }\n    }\n    \n    // Stop alarm sound and modal\n    setIsAlarmRinging(false);\n    if (alarmIntervalId) {\n      clearInterval(alarmIntervalId);\n      setAlarmIntervalId(null);\n    }\n    // Reset reminder state after clearing modal\n    setTimeout(() => setCurrentAlarmReminder(null), 100);\n  };\n\n  useEffect(() => {\n    if (isAlarmRinging && alarmCountdown > 0) {\n      const timer = setTimeout(() => {\n        setAlarmCountdown(alarmCountdown - 1);\n      }, 1000);\n      return () => clearTimeout(timer);\n    } else if (isAlarmRinging && alarmCountdown === 0) {\n      stopAlarm();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isAlarmRinging, alarmCountdown]);\n\n  const scheduleNotification = (reminder) => {\n    if (!reminder.enabled) return;\n\n    const [hours, minutes] = reminder.time.split(':').map(Number);\n    const now = new Date();\n    const scheduledTime = new Date();\n    scheduledTime.setHours(hours, minutes, 0, 0);\n\n    if (scheduledTime <= now) {\n      scheduledTime.setDate(scheduledTime.getDate() + 1);\n    }\n\n    const delay = scheduledTime.getTime() - now.getTime();\n\n    setTimeout(() => {\n      const alarmType = reminder.alarmSound || 'beep';\n      \n      // Show alarm modal for 60 seconds\n      setCurrentAlarmReminder(reminder);\n      setIsAlarmRinging(true);\n      setAlarmCountdown(60);\n      \n      // Play alarm continuously during countdown - loop every 1.5 seconds for constant sound\n      const playAlarmContinuously = () => {\n        // Play 3 rapid beeps (total ~1.5s)\n        for (let i = 0; i < 3; i++) {\n          setTimeout(() => playAlarmSound(alarmType, 0.4), i * 500);\n        }\n      };\n      \n      // Start immediately and repeat every 1.5 seconds\n      playAlarmContinuously();\n      const alarmInterval = setInterval(playAlarmContinuously, 1500);\n      setAlarmIntervalId(alarmInterval);\n      \n      if (notificationPermission === 'granted' && 'Notification' in window) {\n        try {\n          new Notification('DailyRise Reminder ‚è∞', {\n            body: `Time to complete: ${reminder.habitName}`,\n            icon: '/logo192.png',\n            tag: 'dailyrise-reminder',\n            requireInteraction: true,\n          });\n        } catch (error) {\n          console.warn('Notification skipped:', error);\n        }\n      }\n    }, delay);\n  };\n\n  const formatTime = (time) => {\n    const [hours, minutes] = time.split(':').map(Number);\n    const period = hours >= 12 ? 'PM' : 'AM';\n    const displayHours = hours % 12 || 12;\n    return `${displayHours}:${String(minutes).padStart(2, '0')} ${period}`;\n  };\n\n  return (\n    <Layout>\n      <Header title=\"Reminders\" />\n      \n      <div className=\"px-4 py-4 pb-32\">\n        {notificationPermission !== 'granted' && (\n          <div className=\"card mb-4 bg-yellow-50 border border-yellow-200 relative z-40\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5 text-yellow-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n                </svg>\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"text-subheading text-yellow-800\">Enable Notifications</h3>\n                <p className=\"text-body text-yellow-700 mt-1\">Allow notifications to receive habit reminders.</p>\n                <button\n                  onClick={requestNotificationPermission}\n                  className=\"mt-3 bg-yellow-500 text-white px-4 py-2 rounded-lg text-body font-medium hover:bg-yellow-600 transition-colors cursor-pointer\"\n                >\n                  Enable\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-subheading font-poppins text-dark\">My Reminders</h2>\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"flex items-center gap-1 text-body text-primary\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n            </svg>\n            Add Reminder\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : reminders.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <p className=\"text-body text-gray-500 mb-4\">No reminders set. Add one to stay on track!</p>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"btn-primary\"\n            >\n              Add Your First Reminder\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {reminders.map((reminder) => (\n              <div key={reminder.id} className=\"card\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                    reminder.enabled ? 'bg-primary' : 'bg-gray-200'\n                  }`}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className={`w-5 h-5 ${reminder.enabled ? 'text-white' : 'text-gray-400'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-subheading text-dark\">{reminder.habitName}</h3>\n                    <p className=\"text-body text-gray-500\">{formatTime(reminder.time)}</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <button\n                      onClick={() => toggleReminder(reminder.id)}\n                      className={`w-12 h-6 rounded-full transition-colors ${\n                        reminder.enabled ? 'bg-primary' : 'bg-gray-200'\n                      }`}\n                    >\n                      <div className={`w-5 h-5 rounded-full bg-white shadow transform transition-transform ${\n                        reminder.enabled ? 'translate-x-6' : 'translate-x-0.5'\n                      }`}></div>\n                    </button>\n                    <button\n                      onClick={() => deleteReminder(reminder.id)}\n                      className=\"p-2 text-gray-400 hover:text-red-500\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-end overflow-hidden\">\n          <div className=\"bg-white w-full max-h-[85vh] rounded-t-3xl overflow-hidden flex flex-col animate-slide-up\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100 flex-shrink-0\">\n              <h2 className=\"text-heading font-poppins text-dark\">Add Reminder</h2>\n              <button \n                onClick={() => setShowAddModal(false)} \n                className=\"p-1 text-gray-400 hover:text-gray-600\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Scrollable Content */}\n            <div className=\"flex-1 overflow-y-auto px-6 py-4\">\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-body text-gray-600 mb-3 font-medium\">Select Habit</label>\n                  <select\n                    value={selectedHabit}\n                    onChange={(e) => setSelectedHabit(e.target.value)}\n                    className=\"input-field w-full\"\n                  >\n                    <option value=\"\">Choose a habit...</option>\n                    {habits.map((habit) => (\n                      <option key={habit.id} value={habit.id}>{habit.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-body text-gray-600 mb-3 font-medium\">Reminder Time</label>\n                  <input\n                    type=\"time\"\n                    value={reminderTime}\n                    onChange={(e) => setReminderTime(e.target.value)}\n                    className=\"input-field w-full\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-body text-gray-600 mb-3 font-medium\">Alarm Sound</label>\n                  <div className=\"space-y-2\">\n                    {alarmSounds.map((alarm) => (\n                      <div key={alarm.id} className=\"flex items-center gap-2 p-3 border border-gray-200 rounded-lg\">\n                        <input\n                          type=\"radio\"\n                          id={`alarm-${alarm.id}`}\n                          name=\"alarm\"\n                          value={alarm.id}\n                          checked={selectedAlarm === alarm.id}\n                          onChange={(e) => setSelectedAlarm(e.target.value)}\n                          className=\"w-4 h-4\"\n                        />\n                        <label htmlFor={`alarm-${alarm.id}`} className=\"flex-1 text-body text-gray-700\">{alarm.name}</label>\n                        <button\n                          type=\"button\"\n                          onClick={() => playPreview(alarm.id)}\n                          className=\"px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded hover:bg-gray-200\"\n                        >\n                          Play\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Fixed Buttons at Bottom */}\n            <div className=\"flex-shrink-0 bg-white border-t border-gray-100 px-6 py-4 space-y-3 pb-24\">\n              <button\n                onClick={addReminder}\n                disabled={!selectedHabit}\n                className=\"btn-primary w-full py-3 rounded-lg font-medium text-white\"\n              >\n                Add Reminder\n              </button>\n              <button\n                onClick={() => setShowAddModal(false)}\n                className=\"w-full py-3 rounded-lg bg-gray-100 text-gray-600 text-body font-medium\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {isAlarmRinging && currentAlarmReminder && (\n        <div className=\"fixed inset-0 bg-black/70 z-50 flex items-center justify-center\">\n          <div className=\"bg-white rounded-2xl p-8 max-w-sm mx-4 text-center\">\n            <div className=\"w-24 h-24 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4 animate-pulse\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-12 h-12 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9 4a1 1 0 112 0v5a1 1 0 11-2 0V4z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-heading font-poppins text-dark mb-2\">Reminder!</h2>\n            <p className=\"text-body text-gray-600 mb-4\">{currentAlarmReminder.habitName}</p>\n            \n            <div className=\"mb-6 p-4 rounded-lg bg-primary/10\">\n              <p className=\"text-5xl font-bold text-primary\">{alarmCountdown}</p>\n              <p className=\"text-body text-gray-600 mt-1\">seconds</p>\n            </div>\n\n            <button\n              onClick={stopAlarm}\n              className=\"w-full py-3 rounded-lg bg-red-500 text-white text-body font-medium hover:bg-red-600 transition-all\"\n            >\n              STOP\n            </button>\n          </div>\n        </div>\n      )}\n    </Layout>\n  );\n};\n\nexport default Notifications;\n","path":null,"size_bytes":19917,"size_tokens":null},"src/hooks/useChallenges.js":{"content":"import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\n\nexport const useChallenges = (userId, communityId) => {\n  const [sentChallenges, setSentChallenges] = useState({});\n  const [receivedChallenges, setReceivedChallenges] = useState([]);\n\n  useEffect(() => {\n    if (!userId) return;\n\n    // Fetch initial sent challenges\n    fetchSentChallenges();\n  }, [userId]);\n\n  const fetchSentChallenges = async () => {\n    try {\n      const map = {};\n\n      // Fetch challenges where user is the challenger\n      const { data: sentData } = await supabase\n        .from('challenges')\n        .select('challenged_user_id, status')\n        .eq('challenger_id', userId)\n        .neq('status', 'declined');\n\n      sentData?.forEach(c => {\n        map[c.challenged_user_id] = c.status;\n      });\n\n      // Fetch challenges where user is being challenged\n      const { data: receivedData } = await supabase\n        .from('challenges')\n        .select('challenger_id, status')\n        .eq('challenged_user_id', userId)\n        .neq('status', 'declined');\n\n      receivedData?.forEach(c => {\n        map[c.challenger_id] = c.status;\n      });\n\n      setSentChallenges(map);\n    } catch (error) {\n      console.error('Error fetching sent challenges:', error);\n    }\n  };\n\n  return {\n    sentChallenges,\n    receivedChallenges,\n    setReceivedChallenges\n  };\n};\n","path":null,"size_bytes":1384,"size_tokens":null},"src/pages/ForgotPassword.js":{"content":"import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst ForgotPassword = () => {\n  const navigate = useNavigate();\n  const { resetPassword } = useAuth();\n  const [step, setStep] = useState(1);\n  const [formData, setFormData] = useState({\n    email: '',\n    newPassword: '',\n    confirmPassword: '',\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n    setError('');\n  };\n\n  const handleEmailSubmit = (e) => {\n    e.preventDefault();\n    \n    if (!formData.email) {\n      setError('Please enter your email');\n      return;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) {\n      setError('Please enter a valid email');\n      return;\n    }\n\n    setStep(2);\n  };\n\n  const handlePasswordSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!formData.newPassword || !formData.confirmPassword) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    if (formData.newPassword.length < 6) {\n      setError('Password must be at least 6 characters');\n      return;\n    }\n\n    if (formData.newPassword !== formData.confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await resetPassword(formData.email, formData.newPassword);\n    setLoading(false);\n\n    if (error) {\n      setError(error.message);\n    } else {\n      setSuccess('Password reset successful!');\n      setTimeout(() => {\n        navigate('/login');\n      }, 2000);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col px-6 py-8\">\n      <div className=\"flex-1 flex flex-col justify-center max-w-md mx-auto w-full\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-heading font-poppins text-dark mb-2\">Reset Password</h1>\n          <p className=\"text-body text-gray-500\">\n            {step === 1 ? 'Enter your email to reset your password' : 'Create a new password'}\n          </p>\n        </div>\n\n        {step === 1 ? (\n          <form onSubmit={handleEmailSubmit} className=\"space-y-4\">\n            {error && (\n              <div className=\"bg-red-50 text-red-600 text-body p-3 rounded-lg\">\n                {error}\n              </div>\n            )}\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Email</label>\n              <input\n                type=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                className=\"input-field\"\n                placeholder=\"Enter your email\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"btn-primary w-full py-3\"\n            >\n              Continue\n            </button>\n          </form>\n        ) : (\n          <form onSubmit={handlePasswordSubmit} className=\"space-y-4\">\n            {error && (\n              <div className=\"bg-red-50 text-red-600 text-body p-3 rounded-lg\">\n                {error}\n              </div>\n            )}\n\n            {success && (\n              <div className=\"bg-green-50 text-green-600 text-body p-3 rounded-lg\">\n                {success}\n              </div>\n            )}\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">New Password</label>\n              <input\n                type=\"password\"\n                name=\"newPassword\"\n                value={formData.newPassword}\n                onChange={handleChange}\n                className=\"input-field\"\n                placeholder=\"Enter new password\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-body text-gray-600 mb-1\">Confirm New Password</label>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                value={formData.confirmPassword}\n                onChange={handleChange}\n                className=\"input-field\"\n                placeholder=\"Confirm new password\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"btn-primary w-full py-3\"\n            >\n              {loading ? 'Resetting...' : 'Reset Password'}\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setStep(1)}\n              className=\"btn-ghost w-full py-3\"\n            >\n              Back\n            </button>\n          </form>\n        )}\n\n        <p className=\"text-center text-body text-gray-500 mt-6\">\n          Remember your password?{' '}\n          <Link to=\"/login\" className=\"text-primary font-medium hover:underline\">\n            Sign In\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","path":null,"size_bytes":5547,"size_tokens":null},"src/utils/badgeHelper.js":{"content":"import { supabase } from '../lib/supabaseClient';\n\nexport const checkAndAwardBadges = async (userId) => {\n  try {\n    // Get all habit logs for the user\n    const { data: allLogs } = await supabase\n      .from('habit_logs')\n      .select('*')\n      .eq('status', 'done');\n\n    // Get completed habits from last 7 days for \"7 Day Streak\"\n    const sevenDaysAgo = new Date();\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n    const sevenDayLogs = allLogs?.filter(log => new Date(log.log_date) >= sevenDaysAgo) || [];\n\n    // Get completed habits from last 30 days for \"30 Day Master\"\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n    const thirtyDayLogs = allLogs?.filter(log => new Date(log.log_date) >= thirtyDaysAgo) || [];\n\n    // Check existing badges\n    const { data: existingBadges } = await supabase\n      .from('user_badges')\n      .select('badge_id')\n      .eq('user_id', userId);\n\n    const existingBadgeIds = existingBadges?.map(b => b.badge_id) || [];\n\n    // Badge 1: First Step (1 completed habit)\n    if (sevenDayLogs.length >= 1 && !existingBadgeIds.includes(1)) {\n      await supabase\n        .from('user_badges')\n        .insert([{ badge_id: 1, user_id: userId, earned_at: new Date() }]);\n    }\n\n    // Badge 2: Week Warrior (7+ completed habits in 7 days)\n    if (sevenDayLogs.length >= 7 && !existingBadgeIds.includes(2)) {\n      await supabase\n        .from('user_badges')\n        .insert([{ badge_id: 2, user_id: userId, earned_at: new Date() }]);\n    }\n\n    // Badge 3: 30 Day Master (20+ completed habits in 30 days)\n    if (thirtyDayLogs.length >= 20 && !existingBadgeIds.includes(3)) {\n      await supabase\n        .from('user_badges')\n        .insert([{ badge_id: 3, user_id: userId, earned_at: new Date() }]);\n    }\n\n    // Badge 4: Consistency Champion (50+ total completed habits)\n    const totalCompleted = allLogs?.length || 0;\n    if (totalCompleted >= 50 && !existingBadgeIds.includes(4)) {\n      await supabase\n        .from('user_badges')\n        .insert([{ badge_id: 4, user_id: userId, earned_at: new Date() }]);\n    }\n  } catch (error) {\n    console.error('Error checking badges:', error);\n  }\n};\n","path":null,"size_bytes":2193,"size_tokens":null}},"version":2}